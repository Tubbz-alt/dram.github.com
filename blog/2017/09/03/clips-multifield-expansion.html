<?xml version="1.0"?>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:html="http://www.w3.org/1999/xhtml"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/css/main.css"/><link rel="shortcut icon" href="/images/favicon.png"/><title>CLIPS中的multifield展开</title></head><body><header><span id="site-name"><a href="/">dram.me</a></span><nav><ul><li><a href="/blog/about.html">About</a></li><li><a href="/logo/">LOGO</a></li></ul></nav></header><article><h1>CLIPS中的multifield展开</h1><time>03 Sep 2017</time>


<section class="topic">
<h2>补遗</h2>

<ol>
<li>
<p>Perl与CLIPS类似，数组不支持嵌套，所以在调用函数前会自动展开传入的数组参数。—— 2017-09-25</p>
</li>
</ol>
</section>
<p>multifield作为最核心的复合类型，CLIPS对其有很好的支持。其中一点就是展开（expansion）。</p>
<p>在规则的模式匹配中，如果在变量前加<code>$</code>，可以匹配多个值，而在随后使用该变量时，如果前面同样加<code>$</code>，这些值将自动展开。</p>
<p>有一点值得注意的是，默认情况下，CLIPS只在模式匹配中对此有展开的处理，而在RHS的函数调用中，则需要通过<code>set-sequence-operator-recognition</code>设置开启。</p>
<p>另外一点是，由于multifield<a href="https://sourceforge.net/p/clipsrules/discussion/776945/thread/2c68dc68/">不支持嵌套</a>，所以在其他一些地方，也会有自动展开的处理。例如向<code>create$</code>传入multifield不会生成嵌套的multifield值，而是被flatten了。而<code>bind</code>中，传入多个值时，也是会做类似的处理。还有在可变参数中，也有类似的处理（这里<code>printout</code>、<code>format</code>等原生函数是一个例外，向其传入multifield不会被自动展开，具体原因还需要进一步确认）。</p>
</article><footer><p>Copyright © 2007–2018 Xin Wang</p></footer></body></html>
