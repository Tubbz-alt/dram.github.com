<!--  This file is part of the SPFE Open Toolkit. See the accompanying license.txt file --><!--  for applicable licenses. --><!--  (c) Copyright Analecta Communications Inc. 2015 All Rights Reserved. --><!--  Need test for unicode characters and numbers in names. --><html xmlns:my="my:my">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
</head>
<body>
<a name="top"></a><h1>SAM Parser Tests</h1>
<p>This document is the output of the test document processed by test.xslt. That stylesheet attempt to validate the outcome of tests by generating a string version of the markup under the <code language="sam">markup:</code> heading and comparing it to the text of the expected result as shown under the <code>result:</code> heading in the test file. This is not a perfect test. Two issues are known:</p>
<ol>
<li>
<p>Test are done on whitespace normalized versions of the XML markup strings. As such, they do not validly test situations where whitespace should be retained, such as in codeblocks and at the beginning of lines.</p>
</li>
<li>
<p>The SAM parser outputs attributes in alphabetical order. (From an XML point of view, the order of attributes does not matter.) Test should be written such that the attributes in the <code>result:</code> section are in alphabetical order. If not, the test will fail even though the XML is semantically identical.</p>
</li>
</ol>
<p>When running this test you should receive one SAM Parser Warning:</p>
<pre>
SAM parser warning: Unannotated phrase found: {should be reported} If you are trying to insert curly braces into the document, use \{should be reported}.
</pre>
<p>This is a test to make sure unannotated phrases are being reported correctly.</p>
<h2>Contents</h2>
<ul>
<li>
<a href="#idm518132716">Includes</a><ul>
<li><a href="#idm518130668">Local only annotations</a></li>
<li><a href="#idm518070044">Simple include</a></li>
<li><a href="#idm518077212">Nested includes</a></li>
</ul>
</li>
<li>
<a href="#idm518117836">Blocks</a><ul>
<li><a href="#idm518124108">Language metadata</a></li>
<li><a href="#idm520509980">Citations</a></li>
<li><a href="#idm518097340">Escaping block syntax</a></li>
<li><a href="#idm518107452">Complex block structure</a></li>
<li><a href="#idm518170028">Paragraph with colon in first word</a></li>
</ul>
</li>
<li>
<a href="#idm518171564">Remarks</a><ul>
<li><a href="#idm517317612">Simple remark</a></li>
<li><a href="#idm517313772">Complex remark</a></li>
</ul>
</li>
<li>
<a href="#idm517305196">Fields</a><ul><li><a href="#idm517309420">Nested fields</a></li></ul>
</li>
<li>
<a href="#idm517335788">Paragraphs</a><ul>
<li><a href="#idm517335020">Paragraph</a></li>
<li><a href="#idm517333996">With annotated phrase</a></li>
</ul>
</li>
<li>
<a href="#idm517323244">Ordered lists</a><ul>
<li><a href="#idm517321708">Ordered list with spaces</a></li>
<li><a href="#idm517283548">Ordered list no spaces</a></li>
<li><a href="#idm517272028">Ordered list mixed spacing</a></li>
<li><a href="#idm517296348">Nested ordered list with spaces</a></li>
<li><a href="#idm517289308">Nested ordered lists with no spaces</a></li>
<li><a href="#idm517197676">Nested ordered list with mixed spacing</a></li>
</ul>
</li>
<li>
<a href="#idm517255020">Unordered lists</a><ul>
<li><a href="#idm517258860">Unordered list with spaces</a></li>
<li><a href="#idm517247212">Unordered list no spaces</a></li>
<li><a href="#idm517242732">Unordered list mixed spacing</a></li>
<li><a href="#idm517233772">Nested list with spaces</a></li>
<li><a href="#idm517227756">Nested unordered list with no spaces</a></li>
<li><a href="#idm517214572">Nested unordered list with mixed spacing</a></li>
</ul>
</li>
<li>
<a href="#idm517181404">Mixed lists</a><ul>
<li><a href="#idm517183580">Nested mixed lists with spaces</a></li>
<li><a href="#idm517175900">Nested mixed lists with no spaces</a></li>
<li><a href="#idm517168476">Nested numbered lists with mixed spacing</a></li>
<li><a href="#idm517154780">Space between lists</a></li>
<li><a href="#idm517143644">No space between lists</a></li>
</ul>
</li>
<li>
<a href="#idm517136220">Literal lists</a><ul>
<li><a href="#idm517132508">Literal numbered list using \ to escape .</a></li>
<li><a href="#idm517194588">Literal unordered list using \ to escape *</a></li>
</ul>
</li>
<li>
<a href="#idm517191388">Labeled lists</a><ul>
<li><a href="#idm517060620">Simple labeled list</a></li>
<li><a href="#idm517121676">XML markup characters in list labels</a></li>
</ul>
</li>
<li>
<a href="#idm517114892">Record sets</a><ul>
<li><a href="#idm517113740">Recordset</a></li>
<li><a href="#idm517106700">Recordset with only one field name</a></li>
</ul>
</li>
<li>
<a href="#idm517094412">Grids</a><ul>
<li><a href="#idm517096076">Grid with heads</a></li>
<li><a href="#idm517088012">Grid with management domain attributes</a></li>
<li><a href="#idm517070860">Grid with bold row</a></li>
<li><a href="#idm517042764">Grid with side heads</a></li>
</ul>
</li>
<li>
<a href="#idm517040588">Blockquotes</a><ul>
<li><a href="#idm517037516">Blockquote</a></li>
<li><a href="#idm517030604">Alternate block quote</a></li>
</ul>
</li>
<li>
<a href="#idm517016396">Codeblocks</a><ul>
<li><a href="#idm517021132">Simple codeblock</a></li>
<li><a href="#idm517013964">Blank lines in codeblock</a></li>
<li><a href="#idm517013068">Codeblock with citation</a></li>
<li><a href="#idm517005388">Invalid blockstart in codeblock</a></li>
</ul>
</li>
<li>
<a href="#idm517003596">Embedblock</a><ul>
<li><a href="#idm516997452">Simple embed</a></li>
<li><a href="#idm516993100">Embedded XML</a></li>
</ul>
</li>
<li>
<a href="#idm516984524">Lines</a><ul>
<li><a href="#idm516990156">Lines</a></li>
<li><a href="#idm516875644">Lines inside a blockquote</a></li>
</ul>
</li>
<li>
<a href="#idm516868220">Attributes</a><ul>
<li><a href="#idm516863228">Attributes on block</a></li>
<li><a href="#idm516853628">Attributes on field</a></li>
<li><a href="#idm516980732">Attributes on fragment</a></li>
<li><a href="#idm516981372">attributes on grid</a></li>
<li><a href="#idm516969340">attributes on record set</a></li>
<li><a href="#idm516961916">Attributes on unordered list</a></li>
<li><a href="#idm516951164">Attributes on ordered list</a></li>
<li><a href="#idm516954364">Attributes on labeled list</a></li>
<li><a href="#idm516940668">Attributes on lines</a></li>
<li><a href="#idm516926716">Attributes on blockquote</a></li>
<li><a href="#idm516919420">Attributes on a phrase</a></li>
<li><a href="#idm516922492">Attributes on a codeblock</a></li>
<li><a href="#idm516910332">Attributes on an embed</a></li>
<li><a href="#idm516913788">Attributes on inserts</a></li>
<li><a href="#idm516903676">Attributes on inserts</a></li>
</ul>
</li>
<li>
<a href="#idm516893820">Annotations</a><ul>
<li><a href="#idm516894972">Multiple annotations</a></li>
<li><a href="#idm516888444">Consecutive Annotations</a></li>
<li><a href="#idm516885372">Consecutive Annotations on decorations</a></li>
<li><a href="#idm516883580">Annotation followed by citation</a></li>
<li><a href="#idm516712236">Annotation with language metadata</a></li>
<li><a href="#idm516710828">Annotation with a condition</a></li>
<li><a href="#idm516702508">Prior annotation lookup</a></li>
<li><a href="#idm516822316">Case insensitive lookup</a></li>
<li><a href="#idm516825644">Case insensitive lookup with multiple annotations</a></li>
<li><a href="#idm516813100">Prior annotation lookup in included file</a></li>
<li><a href="#idm516807852">Earlier para</a></li>
<li><a href="#idm516808108">Failure</a></li>
<li><a href="#idm516801708">Local only annotations</a></li>
<li><a href="#idm516788396">Attribute annotations</a></li>
<li><a href="#idm516791340">Mix of local and global</a></li>
<li><a href="#idm516784556">Multiple local</a></li>
</ul>
</li>
<li>
<a href="#idm516773420">Decorations</a><ul>
<li><a href="#idm516774956">Bold, italic, and code</a></li>
<li><a href="#idm516765612">Unbalanced decorations and escapes</a></li>
</ul>
</li>
<li>
<a href="#idm516760236">Inline code</a><ul>
<li><a href="#idm516755628">Inline latexmath</a></li>
<li><a href="#idm516759084">Embedded latexmath</a></li>
</ul>
</li>
<li>
<a href="#idm516746284">Links</a><ul>
<li><a href="#idm516746796">Parens not escaped</a></li>
<li><a href="#idm516738860">Parens escaped with backslashes</a></li>
<li><a href="#idm516735660">Using explicit link annotation instead of shortcut</a></li>
</ul>
</li>
<li>
<a href="#idm516734636">Citations</a><ul>
<li><a href="#idm516731948">Citation on phrase</a></li>
<li><a href="#idm516721836">Citation and annotation on one phrase</a></li>
<li><a href="#idm516714156">Literal square brackets</a></li>
<li><a href="#idm516714284">Multiple citations is a paragraph</a></li>
</ul>
</li>
<li>
<a href="#idm516590540">Characters</a><ul>
<li><a href="#idm516598092">HTML named entities</a></li>
<li><a href="#idm516592972">Numeric entities</a></li>
<li><a href="#idm516589260">Hexadecimal entity</a></li>
<li><a href="#idm516586572">Character entities inside phrases and decorations</a></li>
<li><a href="#idm516574924">In code annotation shortcut:</a></li>
<li><a href="#idm516571724">In bold decoration escaped:</a></li>
<li><a href="#idm516568780">Ampersand in a sentence, escaped with \ and not escaped.</a></li>
</ul>
</li>
<li>
<a href="#idm516563020">Character escapes</a><ul>
<li><a href="#idm516558028">Escapes in explicit annotations</a></li>
<li><a href="#idm516681804">Escapes in code decorations</a></li>
<li><a href="#idm516685388">Escapes in decorations</a></li>
<li><a href="#idm516673996">XML reserved characters in citation specifically attribute</a></li>
</ul>
</li>
<li>
<a href="#idm516670284">Conditions</a><ul>
<li><a href="#idm516669644">Conditions on unordered list shortcut</a></li>
<li><a href="#idm516656844">Conditions on ordered list shortcut</a></li>
</ul>
</li>
<li>
<a href="#idm516648780">Block inserts</a><ul>
<li><a href="#idm516649676">Image insert</a></li>
<li><a href="#idm516647500">Key insert</a></li>
</ul>
</li>
<li>
<a href="#idm516644172">Inline inserts</a><ul>
<li><a href="#idm516645580">Inline inserts</a></li>
<li><a href="#idm516639052">Paragraph that is just an inline insert</a></li>
</ul>
</li>
<li>
<a href="#idm516635980">Strings</a><ul>
<li><a href="#idm516627660">String definition</a></li>
<li><a href="#idm516630860">String references</a></li>
</ul>
</li>
<li>
<a href="#idm516618828">Fragments</a><ul>
<li><a href="#idm516618700">Fragment</a></li>
<li><a href="#idm516608588">Insert a fragment</a></li>
</ul>
</li>
<li>
<a href="#idm516614604">Smart quotes</a><ul>
<li><a href="#idm516601932">Smart quotes</a></li>
<li><a href="#idm516605260">Following an annotation</a></li>
<li><a href="#idm516499452">Smart quotes with annotations</a></li>
<li><a href="#idm516492540">Adjacent to parentheses</a></li>
<li><a href="#idm516488700">Close quote followed by citation.</a></li>
<li><a href="#idm516483836">Miscellaneous cases</a></li>
<li><a href="#idm516484348">Escaped dumb quotes</a></li>
<li><a href="#idm516478076">Em and en dashes</a></li>
</ul>
</li>
</ul>
<h2 id="idm518132716">Test: Includes</h2>

<p>Include content from another SAM file.</p>


<h3 id="idm518130668">Case: Local only annotations</h3>

<p>A local-only annotation is one which applies only to the current phrase. It is not taken into consideration in annotation lookup, so the lookup search will proceed to the next phrase with the same text. Annotation lookup will occur for a phrase with a local-only annotation, and the local annotation will be added to the looked up annotations, if any.</p>

<h4>Source</h4>
<pre>
Testing {XML}(language) testing {XML}+(index) testing {XML}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Testing <span style="color: green"><span style="color: red">XML</span></span> testing <span style="color: green"><span style="color: red"><span style="color: red">XML</span></span></span> testing <span style="color: green"><span style="color: red">XML</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm518070044">Case: Simple include</h3>

<p>An include statement.</p>

<h4>Source</h4>
<pre>
&lt;&lt;&lt;(includeme.sam)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<message>
<title>Hello World.</title>
<p>This is the "include" test -- file.</p>
<table border="1">
<tr>
<td>foo</td>
<td>bar</td>
</tr>
<tr>
<td>baz</td>
<td>bat</td>
</tr>
</table>
<p>Annotation lookup test: <span style="color: green"><span style="color: red">test phrase</span></span>.</p>
</message>

<h4>Intended output (space normalized)</h4>
<pre>&lt;message&gt; &lt;title&gt;Hello World.&lt;/title&gt; &lt;p&gt;This is the "include" test -- file.&lt;/p&gt; &lt;grid&gt; &lt;row&gt; &lt;cell&gt;foo&lt;/cell&gt; &lt;cell&gt;bar&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;baz&lt;/cell&gt; &lt;cell&gt;bat&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt; &lt;p&gt;Annotation lookup test: &lt;phrase&gt;&lt;annotation type="test"&gt;test phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt; &lt;/message&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;message&gt; &lt;title&gt;Hello World.&lt;/title&gt; &lt;p&gt;This is the "include" test -- file.&lt;/p&gt; &lt;grid&gt; &lt;row&gt; &lt;cell&gt;foo&lt;/cell&gt; &lt;cell&gt;bar&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;baz&lt;/cell&gt; &lt;cell&gt;bat&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt; &lt;p&gt;Annotation lookup test: &lt;phrase&gt;&lt;annotation type="test"&gt;test phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt; &lt;/message&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm518077212">Case: Nested includes</h3>

<p>Including a file that itself includes a file.</p>

<h4>Source</h4>
<pre>
&lt;&lt;&lt;(includeme1.sam)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<message>
<p>This file includes another file.</p>
<p>Nested includes work! Yipee!</p>
</message>

<h4>Intended output (space normalized)</h4>
<pre>&lt;message&gt; &lt;p&gt;This file includes another file.&lt;/p&gt; &lt;p&gt;Nested includes work! Yipee!&lt;/p&gt; &lt;/message&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;message&gt; &lt;p&gt;This file includes another file.&lt;/p&gt; &lt;p&gt;Nested includes work! Yipee!&lt;/p&gt; &lt;/message&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm518117836">Test: Blocks</h2>

<p>Blocks are the basic building block of a SAM file. This whole document is a test case for blocks.</p>


<h3 id="idm518124108">Case: Language metadata</h3>

<p>A block with language metadata.</p>

<h4>Source</h4>
<pre>
section:(!sp)
    Feliz Navidad
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<section xml:lang="sp">
<p>Feliz Navidad</p>
</section>

<h4>Intended output (space normalized)</h4>
<pre>&lt;section xml:lang="sp"&gt; &lt;p&gt;Feliz Navidad&lt;/p&gt; &lt;/section&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;section xml:lang="sp"&gt; &lt;p&gt;Feliz Navidad&lt;/p&gt; &lt;/section&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm520509980">Case: Citations</h3>

<p>A citation on the block.</p>

<h4>Source</h4>
<pre>
section:(!sp)[Mother McCree] Greeting
    Feliz Navidad
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<section xml:lang="sp">
<span style="color: brown">[Mother McCree]</span>
<title>Greeting</title>
<p>Feliz Navidad</p>
</section>

<h4>Intended output (space normalized)</h4>
<pre>&lt;section xml:lang="sp"&gt; &lt;citation value="Mother McCree"/&gt; &lt;title&gt;Greeting&lt;/title&gt; &lt;p&gt;Feliz Navidad&lt;/p&gt; &lt;/section&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;section xml:lang="sp"&gt; &lt;citation value="Mother McCree"/&gt; &lt;title&gt;Greeting&lt;/title&gt; &lt;p&gt;Feliz Navidad&lt;/p&gt; &lt;/section&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm518097340">Case: Escaping block syntax</h3>

<p>Escape colon to prevent single word followed by colon being recognized as a block.</p>

<h4>Source</h4>
<pre>
and\:
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>and:</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;and:&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;and:&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm518107452">Case: Complex block structure</h3>

<p>A complex block with various structures inside.</p>

<h4>Source</h4>
<pre>
document:
    head:(#foo)
        foo: barney {and}(conjunction) betty
        baz: bat
        $name=fred {and}(conjunction) wilma
        history:: date, author, comment, status
            2014-06-23, mbaker, New\, Topic, In progress
            2016-07-01, mbaker, Revision, In progress
        index:: type, term
            feature, fragment
            feature, fragments
    body: How Fragments Work
        Stuff on how fragments work.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<document>
<head name="foo">
<foo>barney <span style="color: green"><span style="color: red">and</span></span> betty</foo>
<baz>bat</baz>
<string name="name">fred <span style="color: green"><span style="color: red">and</span></span> wilma</string>
<history>
<record>
<date>2014-06-23</date>
<author>mbaker</author>
<comment>New, Topic</comment>
<status>In progress</status>
</record>
<record>
<date>2016-07-01</date>
<author>mbaker</author>
<comment>Revision</comment>
<status>In progress</status>
</record>
</history>
<index>
<record>
<type>feature</type>
<term>fragment</term>
</record>
<record>
<type>feature</type>
<term>fragments</term>
</record>
</index>
</head>
<body>
<title>How Fragments Work</title>
<p>Stuff on how fragments work.</p>
</body>
</document>

<h4>Intended output (space normalized)</h4>
<pre>&lt;document&gt; &lt;head name="foo"&gt; &lt;foo&gt;barney &lt;phrase&gt;&lt;annotation type="conjunction"&gt;and&lt;/annotation&gt;&lt;/phrase&gt; betty&lt;/foo&gt; &lt;baz&gt;bat&lt;/baz&gt; &lt;string name="name"&gt;fred &lt;phrase&gt;&lt;annotation type="conjunction"&gt;and&lt;/annotation&gt;&lt;/phrase&gt; wilma&lt;/string&gt; &lt;history&gt; &lt;record&gt; &lt;date&gt;2014-06-23&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;New, Topic&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/record&gt; &lt;record&gt; &lt;date&gt;2016-07-01&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;Revision&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/record&gt; &lt;/history&gt; &lt;index&gt; &lt;record&gt; &lt;type&gt;feature&lt;/type&gt; &lt;term&gt;fragment&lt;/term&gt; &lt;/record&gt; &lt;record&gt; &lt;type&gt;feature&lt;/type&gt; &lt;term&gt;fragments&lt;/term&gt; &lt;/record&gt; &lt;/index&gt; &lt;/head&gt; &lt;body&gt; &lt;title&gt;How Fragments Work&lt;/title&gt; &lt;p&gt;Stuff on how fragments work.&lt;/p&gt; &lt;/body&gt; &lt;/document&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;document&gt; &lt;head name="foo"&gt; &lt;foo&gt;barney &lt;phrase&gt;&lt;annotation type="conjunction"&gt;and&lt;/annotation&gt;&lt;/phrase&gt; betty&lt;/foo&gt; &lt;baz&gt;bat&lt;/baz&gt; &lt;string name="name"&gt;fred &lt;phrase&gt;&lt;annotation type="conjunction"&gt;and&lt;/annotation&gt;&lt;/phrase&gt; wilma&lt;/string&gt; &lt;history&gt; &lt;record&gt; &lt;date&gt;2014-06-23&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;New, Topic&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/record&gt; &lt;record&gt; &lt;date&gt;2016-07-01&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;Revision&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/record&gt; &lt;/history&gt; &lt;index&gt; &lt;record&gt; &lt;type&gt;feature&lt;/type&gt; &lt;term&gt;fragment&lt;/term&gt; &lt;/record&gt; &lt;record&gt; &lt;type&gt;feature&lt;/type&gt; &lt;term&gt;fragments&lt;/term&gt; &lt;/record&gt; &lt;/index&gt; &lt;/head&gt; &lt;body&gt; &lt;title&gt;How Fragments Work&lt;/title&gt; &lt;p&gt;Stuff on how fragments work.&lt;/p&gt; &lt;/body&gt; &lt;/document&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm518170028">Case: Paragraph with colon in first word</h3>

<p>Case related to issue #94.</p>

<h4>Source</h4>
<pre>
article: Foo

    foo{bar}(http://www.example.com/).

    `foo::bar` baz.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<article>
<title>Foo</title>
<p>foo<span style="color: green"><a href="http://www.example.com/">bar</a></span>.</p>
<p><code>foo::bar</code> baz.</p>
</article>

<h4>Intended output (space normalized)</h4>
<pre>&lt;article&gt; &lt;title&gt;Foo&lt;/title&gt; &lt;p&gt;foo&lt;phrase&gt;&lt;annotation type="link" specifically="http://www.example.com/"&gt;bar&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt; &lt;p&gt;&lt;code&gt;foo::bar&lt;/code&gt; baz.&lt;/p&gt; &lt;/article&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;article&gt; &lt;title&gt;Foo&lt;/title&gt; &lt;p&gt;foo&lt;phrase&gt;&lt;annotation type="link" specifically="http://www.example.com/"&gt;bar&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt; &lt;p&gt;&lt;code&gt;foo::bar&lt;/code&gt; baz.&lt;/p&gt; &lt;/article&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm518171564">Test: Remarks</h2>

<p>Remarks are a type of comment that is attributed to an author and is used for commenting editorially on the document.</p>


<h3 id="idm517317612">Case: Simple remark</h3>

<p>Just a simple remark. Nothing fancy.</p>

<h4>Source</h4>
<pre>
!!!(mbaker)
    This is a remark.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<remark attribution="mbaker">
<p>This is a remark.</p>
</remark>

<h4>Intended output (space normalized)</h4>
<pre>&lt;remark attribution="mbaker"&gt; &lt;p&gt;This is a remark.&lt;/p&gt; &lt;/remark&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;remark attribution="mbaker"&gt; &lt;p&gt;This is a remark.&lt;/p&gt; &lt;/remark&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517313772">Case: Complex remark</h3>

<p>A little bit more complex.</p>

<h4>Source</h4>
<pre>
!!!(Charles André Joseph Marie de Gaulle !@#$%^&amp;*(((({}":&lt;&gt;)(*cdg1)(!fr)
    This is a remark.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<remark attribution='Charles André Joseph Marie de Gaulle !@#$%^&amp;*(((({}":&lt;&gt;' id="cdg1" xml:lang="fr">
<p>This is a remark.</p>
</remark>

<h4>Intended output (space normalized)</h4>
<pre>&lt;remark attribution="Charles André Joseph Marie de Gaulle !@#$%^&amp;amp;*(((({}&amp;quot;:&amp;lt;&amp;gt;" id="cdg1" xml:lang="fr"&gt; &lt;p&gt;This is a remark.&lt;/p&gt; &lt;/remark&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;remark attribution="Charles André Joseph Marie de Gaulle !@#$%^&amp;amp;*(((({}&amp;quot;:&amp;lt;&amp;gt;" id="cdg1" xml:lang="fr"&gt; &lt;p&gt;This is a remark.&lt;/p&gt; &lt;/remark&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517305196">Test: Fields</h2>

<p>A field is a block without children. A field value does not get wrapped in a title element. It is simple the value of the field.</p>


<h3 id="idm517309420">Case: Nested fields</h3>

<p>Nested fields. Anything with a child, of course, is a block, not a field.</p>

<h4>Source</h4>
<pre>
address:
    name: Fred Flintstone
    address: Bedrock
    era: Stone Age
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<address>
<name>Fred Flintstone</name>
<address>Bedrock</address>
<era>Stone Age</era>
</address>

<h4>Intended output (space normalized)</h4>
<pre>&lt;address&gt; &lt;name&gt;Fred Flintstone&lt;/name&gt; &lt;address&gt;Bedrock&lt;/address&gt; &lt;era&gt;Stone Age&lt;/era&gt; &lt;/address&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;address&gt; &lt;name&gt;Fred Flintstone&lt;/name&gt; &lt;address&gt;Bedrock&lt;/address&gt; &lt;era&gt;Stone Age&lt;/era&gt; &lt;/address&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517335788">Test: Paragraphs</h2>

<p>A paragraph is a block of text over consecutive lines.</p>


<h3 id="idm517335020">Case: Paragraph</h3>

<p>A simple multi-line paragraph ending with a blank space.</p>

<h4>Source</h4>
<pre>
Wafting zephyrs
quickly vexed
Jumbo.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Wafting zephyrs quickly vexed Jumbo.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Wafting zephyrs quickly vexed Jumbo.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Wafting zephyrs quickly vexed Jumbo.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517333996">Case: With annotated phrase</h3>

<p>A paragraph over multiple lines with an annotated phrase.</p>

<h4>Source</h4>
<pre>
This is a {paragraph}(foo)
that wraps across
multiple lines.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This is a <span style="color: green"><span style="color: red">paragraph</span></span> that wraps across multiple lines.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This is a &lt;phrase&gt;&lt;annotation type="foo"&gt;paragraph&lt;/annotation&gt;&lt;/phrase&gt; that wraps across multiple lines.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This is a &lt;phrase&gt;&lt;annotation type="foo"&gt;paragraph&lt;/annotation&gt;&lt;/phrase&gt; that wraps across multiple lines.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517323244">Test: Ordered lists</h2>

<p>Ordered lists are created by starting a line with a number followed by a period. Exact numbers are not retained.</p>


<h3 id="idm517321708">Case: Ordered list with spaces</h3>

<p>Ordered lists can have blank lines between the items.</p>

<h4>Source</h4>
<pre>
0. One

0. Two

99999. Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two</p>
</li>
<li>
<p>Three</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517283548">Case: Ordered list no spaces</h3>

<p>List are also recognized without space between items. List items can wrap to another line if more indented than the number. Additional paragraphs can be included if more indented than the number.</p>

<h4>Source</h4>
<pre>
0. One
0. Two this
   paragraph wraps.

   This is another para in the list item.
99999. Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two this paragraph wraps.</p>
<p>This is another para in the list item.</p>
</li>
<li>
<p>Three</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two this paragraph wraps.&lt;/p&gt; &lt;p&gt;This is another para in the list item.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two this paragraph wraps.&lt;/p&gt; &lt;p&gt;This is another para in the list item.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517272028">Case: Ordered list mixed spacing</h3>

<p>Ordered list with inconsistent spacing.</p>

<h4>Source</h4>
<pre>
0. One

0. Two
99999. Three

7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two</p>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517296348">Case: Nested ordered list with spaces</h3>

<p>Ordered lists at different indents, with spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One

0. Two x

    5. Two and a quarter x

    6. Two and a half

    9. Two and three quarters

99999. Three

7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two x</p>
<ol>
<li>
<p>Two and a quarter x</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ol>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two x&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter x&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two x&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter x&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517289308">Case: Nested ordered lists with no spaces</h3>

<p>Ordered lists at different indents, with no spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One
0. Two z
    5. Two and a quarter z
    6. Two and a half
    9. Two and three quarters
99999. Three
7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two z</p>
<ol>
<li>
<p>Two and a quarter z</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ol>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two z&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter z&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two z&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter z&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517197676">Case: Nested ordered list with mixed spacing</h3>

<p>Ordered lists at different indents, with some spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One
0. Two r
    5. Two and a quarter r

    6. Two and a half
    9. Two and three quarters

99999. Three

7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two r</p>
<ol>
<li>
<p>Two and a quarter r</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ol>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two r&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter r&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two r&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter r&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517255020">Test: Unordered lists</h2>

<p>Unordered lists are indicated by starting a line with <code>*</code>.</p>


<h3 id="idm517258860">Case: Unordered list with spaces</h3>

<p>A list with spaces between the lines.</p>

<h4>Source</h4>
<pre>
* One

* Two t

* Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two t</p>
</li>
<li>
<p>Three</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two t&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two t&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517247212">Case: Unordered list no spaces</h3>

<p>A list with no spaces between the lines.</p>

<h4>Source</h4>
<pre>
* One
* Two y
* Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two y</p>
</li>
<li>
<p>Three</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two y&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two y&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517242732">Case: Unordered list mixed spacing</h3>

<p>A list with mixed spacing between the lines.</p>

<h4>Source</h4>
<pre>
* One
* Two u

* Three
* Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two u</p>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two u&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two u&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517233772">Case: Nested list with spaces</h3>

<p>Nested lists separated by spaces.</p>

<h4>Source</h4>
<pre>
* One

* Two i

    * Two and a quarter

    * Two and a half

    * Two and three quarters

* Three

* Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two i</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two i&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two i&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517227756">Case: Nested unordered list with no spaces</h3>

<p>Nested lists not separated by spaces.</p>

<h4>Source</h4>
<pre>
* One
* Two k
    * Two and a quarter
    * Two and a half
    * Two and three quarters
* Three
* Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two k</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two k&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two k&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517214572">Case: Nested unordered list with mixed spacing</h3>

<p>Nested lists separated by some spaces.</p>

<h4>Source</h4>
<pre>
* One
* Two p
    * Two and a quarter p

    * Two and a half
    * Two and three quarters

* Three
* Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two p</p>
<ul>
<li>
<p>Two and a quarter p</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two p&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter p&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two p&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter p&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517181404">Test: Mixed lists</h2>

<p>You can nest ordered and unordered lists inside each other or follow a list of one type with a list of another type.</p>


<h3 id="idm517183580">Case: Nested mixed lists with spaces</h3>

<p>Unordered inside ordered list, spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One

0. Two a

    * Two and a quarter

    * Two and a half

    * Two and three quarters

99999. Three

7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two a</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two a&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two a&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517175900">Case: Nested mixed lists with no spaces</h3>

<p>Unordered inside ordered list, no spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One
0. Two s
    * Two and a quarter
    * Two and a half
    * Two and three quarters
99999. Three
7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two s</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two s&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two s&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517168476">Case: Nested numbered lists with mixed spacing</h3>

<p>Unordered inside ordered list, some spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One

0. Two d
    * Two and a quarter

    * Two and a half
    * Two and three quarters
99999. Three times
       three is nine.

       Four times four is sixteen.

       Five time five is twenty five.


7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two d</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three times three is nine.</p>
<p>Four times four is sixteen.</p>
<p>Five time five is twenty five.</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two d&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three times three is nine.&lt;/p&gt; &lt;p&gt;Four times four is sixteen.&lt;/p&gt; &lt;p&gt;Five time five is twenty five.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two d&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three times three is nine.&lt;/p&gt; &lt;p&gt;Four times four is sixteen.&lt;/p&gt; &lt;p&gt;Five time five is twenty five.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517154780">Case: Space between lists</h3>

<p>An ordered list can follow an unordered list directly and vice versa.</p>

<h4>Source</h4>
<pre>
* One
* Two f
* Three

1. One
2. Two g
3. Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two f</p>
</li>
<li>
<p>Three</p>
</li>
</ul>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two g</p>
</li>
<li>
<p>Three</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two f&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two g&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two f&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two g&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517143644">Case: No space between lists</h3>

<p>An unordered list followed by an ordered list with no space between them.</p>

<h4>Source</h4>
<pre>
* One
* Two h
* Three
1. One
2. Two j
3. Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two h</p>
</li>
<li>
<p>Three</p>
</li>
</ul>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two j</p>
</li>
<li>
<p>Three</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two h&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two j&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two h&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two j&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517136220">Test: Literal lists</h2>

<p>Ordered lists have the number stripped away and are renumbered on output. Unordered list have their <code>*</code> stripped away and replaced with the style of bullet specified on output processing. If you want to preserve actual numbers and bullets in your lists, you need to escape them so that the lines are not recognized as lists items.</p>


<h3 id="idm517132508">Case: Literal numbered list using <code>\</code> to escape <code>.</code>
</h3>

<p>To have a list number recognized as a literal, escape the period following the number (not the number itself). Because these are now paragraphs, not lists, you must put spaces between items or they will be run together into one paragraph.</p>

<h4>Source</h4>
<pre>
2\. This is just a paragraph

4\. This is just a paragraph

9\. This is just a paragraph
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>2. This is just a paragraph</p>
<p>4. This is just a paragraph</p>
<p>9. This is just a paragraph</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;2. This is just a paragraph&lt;/p&gt; &lt;p&gt;4. This is just a paragraph&lt;/p&gt; &lt;p&gt;9. This is just a paragraph&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;2. This is just a paragraph&lt;/p&gt; &lt;p&gt;4. This is just a paragraph&lt;/p&gt; &lt;p&gt;9. This is just a paragraph&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517194588">Case: Literal unordered list using <code>\</code> to escape <code>*</code>
</h3>

<p>To have a list number recognized as a literal, escape the <code>*</code>. Because these are now paragraphs, not lists, you must put spaces between items or they will be run together into one paragraph.</p>

<h4>Source</h4>
<pre>
\* This is just a paragraph

\* This is just a paragraph

\* This is just a paragraph
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>* This is just a paragraph</p>
<p>* This is just a paragraph</p>
<p>* This is just a paragraph</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;* This is just a paragraph&lt;/p&gt; &lt;p&gt;* This is just a paragraph&lt;/p&gt; &lt;p&gt;* This is just a paragraph&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;* This is just a paragraph&lt;/p&gt; &lt;p&gt;* This is just a paragraph&lt;/p&gt; &lt;p&gt;* This is just a paragraph&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517191388">Test: Labeled lists</h2>

<p>You can create lists with labels rather than bullets. The label is contained between two pipe characters. There must be no space between the opening pipe and the first character of the label (otherwise it will be parsed as a line).</p>


<h3 id="idm517060620">Case: Simple labeled list</h3>

<p>A labeled list.</p>

<h4>Source</h4>
<pre>
|Do| a deer,
     a female deer
|Re| a drop of
     golden sun

     Is it a particle or a wave?
|Me| a name I call myself
|Fa| a long long way to run
|So| a needle pulling thread
|La| a note to follow so
|Te| a drink with jam and bread
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>



<p><b>Do: </b>a deer, a female deer</p>



<p><b>Re: </b>a drop of golden sun</p>
<p>Is it a particle or a wave?</p>



<p><b>Me: </b>a name I call myself</p>



<p><b>Fa: </b>a long long way to run</p>



<p><b>So: </b>a needle pulling thread</p>



<p><b>La: </b>a note to follow so</p>



<p><b>Te: </b>a drink with jam and bread</p>



<h4>Intended output (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li&gt; &lt;label&gt;Do&lt;/label&gt; &lt;p&gt;a deer, a female deer&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Re&lt;/label&gt; &lt;p&gt;a drop of golden sun&lt;/p&gt; &lt;p&gt;Is it a particle or a wave?&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Me&lt;/label&gt; &lt;p&gt;a name I call myself&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Fa&lt;/label&gt; &lt;p&gt;a long long way to run&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;So&lt;/label&gt; &lt;p&gt;a needle pulling thread&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;La&lt;/label&gt; &lt;p&gt;a note to follow so&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Te&lt;/label&gt; &lt;p&gt;a drink with jam and bread&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li&gt; &lt;label&gt;Do&lt;/label&gt; &lt;p&gt;a deer, a female deer&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Re&lt;/label&gt; &lt;p&gt;a drop of golden sun&lt;/p&gt; &lt;p&gt;Is it a particle or a wave?&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Me&lt;/label&gt; &lt;p&gt;a name I call myself&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Fa&lt;/label&gt; &lt;p&gt;a long long way to run&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;So&lt;/label&gt; &lt;p&gt;a needle pulling thread&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;La&lt;/label&gt; &lt;p&gt;a note to follow so&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Te&lt;/label&gt; &lt;p&gt;a drink with jam and bread&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517121676">Case: XML markup characters in list labels</h3>

<p>Making sure that the contents of a list label are properly escaped when generating XML.</p>

<h4>Source</h4>
<pre>
|foo1 &amp; bar1| foobar1
|foo2 &amp; bar2| foobar2
|foo3 &amp; bar3| foobar3
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>



<p><b>foo1 &amp; bar1: </b>foobar1</p>



<p><b>foo2 &amp; bar2: </b>foobar2</p>



<p><b>foo3 &amp; bar3: </b>foobar3</p>



<h4>Intended output (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li&gt; &lt;label&gt;foo1 &amp;amp; bar1&lt;/label&gt; &lt;p&gt;foobar1&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;foo2 &amp;amp; bar2&lt;/label&gt; &lt;p&gt;foobar2&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;foo3 &amp;amp; bar3&lt;/label&gt; &lt;p&gt;foobar3&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li&gt; &lt;label&gt;foo1 &amp;amp; bar1&lt;/label&gt; &lt;p&gt;foobar1&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;foo2 &amp;amp; bar2&lt;/label&gt; &lt;p&gt;foobar2&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;foo3 &amp;amp; bar3&lt;/label&gt; &lt;p&gt;foobar3&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517114892">Test: Record sets</h2>

<p>Record sets are a structure similar to a database table. They record data in rows with identical column names. Column names are specified in the records set header.</p>


<h3 id="idm517113740">Case: Recordset</h3>

<p>Test that recordsets are recognized correctly. Includes a test that character escapes are recognized in records and commas can be escaped.</p>

<h4>Source</h4>
<pre>
history:: date, author, comment, status
    2014-06-23, mbaker, New\, Topic, In progress
    2016-07-01, mbaker, Revision, In progress
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<history>
<record>
<date>2014-06-23</date>
<author>mbaker</author>
<comment>New, Topic</comment>
<status>In progress</status>
</record>
<record>
<date>2016-07-01</date>
<author>mbaker</author>
<comment>Revision</comment>
<status>In progress</status>
</record>
</history>

<h4>Intended output (space normalized)</h4>
<pre>&lt;history&gt; &lt;record&gt; &lt;date&gt;2014-06-23&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;New, Topic&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/record&gt; &lt;record&gt; &lt;date&gt;2016-07-01&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;Revision&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/record&gt; &lt;/history&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;history&gt; &lt;record&gt; &lt;date&gt;2014-06-23&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;New, Topic&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/record&gt; &lt;record&gt; &lt;date&gt;2016-07-01&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;Revision&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/record&gt; &lt;/history&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517106700">Case: Recordset with only one field name</h3>

<p>Test that a recordset works correctly with only one field.</p>

<h4>Source</h4>
<pre>
filmography:: film
    Rio Bravo
    The Shootish
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<filmography>
<record>
<film>Rio Bravo</film>
</record>
<record>
<film>The Shootish</film>
</record>
</filmography>

<h4>Intended output (space normalized)</h4>
<pre>&lt;filmography&gt; &lt;record&gt; &lt;film&gt;Rio Bravo&lt;/film&gt; &lt;/record&gt; &lt;record&gt; &lt;film&gt;The Shootish&lt;/film&gt; &lt;/record&gt; &lt;/filmography&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;filmography&gt; &lt;record&gt; &lt;film&gt;Rio Bravo&lt;/film&gt; &lt;/record&gt; &lt;record&gt; &lt;film&gt;The Shootish&lt;/film&gt; &lt;/record&gt; &lt;/filmography&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517094412">Test: Grids</h2>

<p>Grids are a simple form of table. They are purely a layout device with no semantic value. They have no table heads or row or column spanning. More complex tables can be modeled using explicit blocks. Labeled lists can be modeled using the labeled list structure. Database-like tables can be modeled using record sets.</p>


<h3 id="idm517096076">Case: Grid with heads</h3>

<p>Table heads are simulated using bold in the top row of the grid.</p>

<h4>Source</h4>
<pre>
+++
    *Type*  | *Term*    | *Notes*
    feature | fragment  | bing
    feature | fragments | bang
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td><span style="color: green"><b>Type</b></span></td>
<td><span style="color: green"><b>Term</b></span></td>
<td><span style="color: green"><b>Notes</b></span></td>
</tr>
<tr>
<td>feature</td>
<td>fragment</td>
<td>bing</td>
</tr>
<tr>
<td>feature</td>
<td>fragments</td>
<td>bang</td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517088012">Case: Grid with management domain attributes</h3>

<p>The same grid only with management domain attributes attached to the grid header.</p>
<p>Note that SAM Parser sorts block attributes alphabetically for output, which makes it possible to test them with a simple string comparison (such as that performed by test.xslt). However, this is behavior of this parser, not a SAM language requirement.</p>

<h4>Source</h4>
<pre>
+++(*foom)(#bar)(?baz)
    *Type*  | *Term*    | *Notes*

    feature | fragment  | bing

    feature | fragments | bang
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td><span style="color: green"><b>Type</b></span></td>
<td><span style="color: green"><b>Term</b></span></td>
<td><span style="color: green"><b>Notes</b></span></td>
</tr>
<tr>
<td>feature</td>
<td>fragment</td>
<td>bing</td>
</tr>
<tr>
<td>feature</td>
<td>fragments</td>
<td>bang</td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid conditions="baz" id="foom" name="bar"&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid conditions="baz" id="foom" name="bar"&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517070860">Case: Grid with bold row</h3>

<p>Make an lower row bold.</p>

<h4>Source</h4>
<pre>
+++
    *Type*    | *Term*      | *Notes*
    feature   | fragment    | bing
    *feature* | *fragments* | *bang*
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td><span style="color: green"><b>Type</b></span></td>
<td><span style="color: green"><b>Term</b></span></td>
<td><span style="color: green"><b>Notes</b></span></td>
</tr>
<tr>
<td>feature</td>
<td>fragment</td>
<td>bing</td>
</tr>
<tr>
<td><span style="color: green"><b>feature</b></span></td>
<td><span style="color: green"><b>fragments</b></span></td>
<td><span style="color: green"><b>bang</b></span></td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;fragments&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;bang&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;fragments&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;bang&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517042764">Case: Grid with side heads</h3>

<p>Grid with row headings rather than column headings.</p>

<h4>Source</h4>
<pre>
+++
    *Type*    | Term      | Notes
    *feature* | fragment  | bing
    *feature* | fragments | bang
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td><span style="color: green"><b>Type</b></span></td>
<td>Term</td>
<td>Notes</td>
</tr>
<tr>
<td><span style="color: green"><b>feature</b></span></td>
<td>fragment</td>
<td>bing</td>
</tr>
<tr>
<td><span style="color: green"><b>feature</b></span></td>
<td>fragments</td>
<td>bang</td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;Term&lt;/cell&gt; &lt;cell&gt;Notes&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;Term&lt;/cell&gt; &lt;cell&gt;Notes&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517040588">Test: Blockquotes</h2>

<p>Blockquotes are introduced by three quotations marke (single or double). The content of a blockquote is normal SAM markup.</p>


<h3 id="idm517037516">Case: Blockquote</h3>

<p>A blockquote with management domain metadata.</p>

<h4>Source</h4>
<pre>
After this paragraph, there is a blockquote:

"""(*foo)(#bar)(?baz)
    The quick brown fox jumps over the lazy dog.

    And the {cow}(beast "bovine")[Mother Goose] jumps over the moon.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>After this paragraph, there is a blockquote:</p>
<blockquote conditions="baz" id="foo" name="bar">
<p>The quick brown fox jumps over the lazy dog.</p>
<p>And the <span style="color: green"><span style="color: red">cow<span style="color: brown">[Mother Goose]</span></span></span> jumps over the moon.</p>
</blockquote>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;After this paragraph, there is a blockquote:&lt;/p&gt; &lt;blockquote conditions="baz" id="foo" name="bar"&gt; &lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;p&gt;And the &lt;phrase&gt;&lt;annotation type="beast" specifically="bovine"&gt;&lt;citation value="Mother Goose"&gt;cow&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; jumps over the moon.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;After this paragraph, there is a blockquote:&lt;/p&gt; &lt;blockquote conditions="baz" id="foo" name="bar"&gt; &lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;p&gt;And the &lt;phrase&gt;&lt;annotation type="beast" specifically="bovine"&gt;&lt;citation value="Mother Goose"&gt;cow&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; jumps over the moon.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517030604">Case: Alternate block quote</h3>

<p>Blockquote with single quotes. Includes multiple citations.</p>

<h4>Source</h4>
<pre>
This is another paragraph. Then there is an alternate blockquote:

'''( #foo5)[Mother Goose](?bar)(?baz)[Father Time][*foo page 2]
    The quick brown fox jumps over the lazy dog.

'''
    This is a blockquote without a citation.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This is another paragraph. Then there is an alternate blockquote:</p>
<blockquote conditions="bar,baz" name="foo5">
<span style="color: brown">[Mother Goose]</span>
<span style="color: brown">[Father Time]</span>
<span style="color: brown">[]</span>
<p>The quick brown fox jumps over the lazy dog.</p>
</blockquote>
<blockquote>
<p>This is a blockquote without a citation.</p>
</blockquote>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This is another paragraph. Then there is an alternate blockquote:&lt;/p&gt; &lt;blockquote conditions="bar,baz" name="foo5"&gt; &lt;citation value="Mother Goose"/&gt; &lt;citation value="Father Time"/&gt; &lt;citation extra="page 2" idref="foo"/&gt; &lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;This is a blockquote without a citation.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This is another paragraph. Then there is an alternate blockquote:&lt;/p&gt; &lt;blockquote conditions="bar,baz" name="foo5"&gt; &lt;citation value="Mother Goose"/&gt; &lt;citation value="Father Time"/&gt; &lt;citation extra="page 2" idref="foo"/&gt; &lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;This is a blockquote without a citation.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517016396">Test: Codeblocks</h2>

<p>A codeblock is a block of program code. A codeblock is treated as plain text and is not parsed as SAM markup. It will be copied to output exactly as it occurs in the source. Codeblocks are denoted by three back ticks at the start of a line. Codeblocks have a special annotation. The first word of an annotation on a codeblock is the language of the code.</p>


<h3 id="idm517021132">Case: Simple codeblock</h3>

<p>A simple codeblock.</p>

<h4>Source</h4>
<pre>
```(pyt&amp;#x68;on)(?foo)(!en)
    def escape_for_xml(s):
        t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
        try:
            return s.translate(t)
        except AttributeError:
            return s
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
def escape_for_xml(s):
    t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
    try:
        return s.translate(t)
    except AttributeError:
        return s
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock conditions="foo" language="python" xml:lang="en"&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock conditions="foo" language="python" xml:lang="en"&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517013964">Case: Blank lines in codeblock</h3>

<p>Blank lines in a code block. The display of the result will be confusing here because the result is whitespace normalized for ease of comparison with the generated XML.</p>

<h4>Source</h4>
<pre>
```(sam)
    warnings:
        warning:(#warn_danger_domestic)
            title: Danger

            Be very very careful. This could kill you.

        warning:(#warn_danger_foreign)
            title: Look out!

            Pay close attention. You could really hurt yourself.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
warnings:
    warning:(#warn_danger_domestic)
        title: Danger

        Be very very careful. This could kill you.

    warning:(#warn_danger_foreign)
        title: Look out!

        Pay close attention. You could really hurt yourself.
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock language="sam"&gt; warnings: warning:(#warn_danger_domestic) title: Danger Be very very careful. This could kill you. warning:(#warn_danger_foreign) title: Look out! Pay close attention. You could really hurt yourself. &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock language="sam"&gt; warnings: warning:(#warn_danger_domestic) title: Danger Be very very careful. This could kill you. warning:(#warn_danger_foreign) title: Look out! Pay close attention. You could really hurt yourself. &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517013068">Case: Codeblock with citation</h3>

<p>A codeblock with a citation.</p>

<h4>Source</h4>
<pre>
```(python)(?foo)[demos/foo.py]
    def escape_for_xml(s):
        t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
        try:
            return s.translate(t)
        except AttributeError:
            return s
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
<span style="color: brown">[demos/foo.py]</span>
def escape_for_xml(s):
    t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
    try:
        return s.translate(t)
    except AttributeError:
        return s
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock conditions="foo" language="python"&gt; &lt;citation value="demos/foo.py"/&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock conditions="foo" language="python"&gt; &lt;citation value="demos/foo.py"/&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm517005388">Case: Invalid blockstart in codeblock</h3>

<p>This is an construct that raise an error in an actual document. Curious because lots of valid block starts in other codeblocks did not cause a problem. But this one raised an invalid block name error. Turns out this was caused by tabs instead of spaces used to indent the line, which promoted it to a higher level of the document hierarchy and thus outside the codeblock. But the test is worth keeping to make sure that the contents of codeblocks are not being interpreted as SAM markup.</p>

<h4>Source</h4>
<pre>
```
    first-ordered-list-item =
        {fontx: 12pt "Century Schoolbook"}&lt;count=1&gt;.[tab]
    ordered-list-item =
        {fonty: 12pt "Century Schoolbook"}&lt;++count&gt;.[tab]
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
first-ordered-list-item =
    {fontx: 12pt "Century Schoolbook"}&lt;count=1&gt;.[tab]
ordered-list-item =
    {fonty: 12pt "Century Schoolbook"}&lt;++count&gt;.[tab]
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock&gt; first-ordered-list-item = {fontx: 12pt "Century Schoolbook"}&amp;lt;count=1&amp;gt;.[tab] ordered-list-item = {fonty: 12pt "Century Schoolbook"}&amp;lt;++count&amp;gt;.[tab] &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock&gt; first-ordered-list-item = {fontx: 12pt "Century Schoolbook"}&amp;lt;count=1&amp;gt;.[tab] ordered-list-item = {fonty: 12pt "Century Schoolbook"}&amp;lt;++count&amp;gt;.[tab] &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm517003596">Test: Embedblock</h2>

<p>An embed is a block of markup or code in another language that is intended to be interpreted rather than displayed. For instance, it can be used to include an equation using LaTeX or a diagram using SVG.</p>


<h3 id="idm516997452">Case: Simple embed</h3>

<p>Simple embed of an equation using LaTeX.</p>

<h4>Source</h4>
<pre>
```(=latexmathml)(*id13)(#name)(?a)(?b)
    n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<embedblock conditions="a,b" encoding="latexmathml" id="id13" name="name">
n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k
</embedblock>

<h4>Intended output (space normalized)</h4>
<pre>&lt;embedblock conditions="a,b" encoding="latexmathml" id="id13" name="name"&gt; n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k &lt;/embedblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;embedblock conditions="a,b" encoding="latexmathml" id="id13" name="name"&gt; n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k &lt;/embedblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516993100">Case: Embedded XML</h3>

<p>A chunk of XML.</p>

<h4>Source</h4>
<pre>
```(=xml)
    &lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;foo bar="bat"&gt;
        &lt;boo/&gt;
        &lt;hoo/&gt;
    &lt;/foo&gt;
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<embedblock encoding="xml">
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;foo bar="bat"&gt;
    &lt;boo/&gt;
    &lt;hoo/&gt;
&lt;/foo&gt;
</embedblock>

<h4>Intended output (space normalized)</h4>
<pre>&lt;embedblock encoding="xml"&gt; &amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt; &amp;lt;foo bar="bat"&amp;gt; &amp;lt;boo/&amp;gt; &amp;lt;hoo/&amp;gt; &amp;lt;/foo&amp;gt; &lt;/embedblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;embedblock encoding="xml"&gt; &amp;lt;?xml version="1.0" encoding="UTF-8"?&amp;gt; &amp;lt;foo bar="bat"&amp;gt; &amp;lt;boo/&amp;gt; &amp;lt;hoo/&amp;gt; &amp;lt;/foo&amp;gt; &lt;/embedblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516984524">Test: Lines</h2>

<p>Lines allows you to create text with specific line breaks. Lines are created by beginning each line on a new line and starting with a <code>|</code> character. There must be one space after the <code>|</code>, which is discarded. All other spaces after <code>|</code> are retained. (Retained spaces are not tested for in text.xslt because the test normalize space.)</p>


<h3 id="idm516990156">Case: Lines</h3>

<p>Lines with various annotations:</p>

<h4>Source</h4>
<pre>
|(#foo2) You gotta walk that lonesome valley,[*bing page 22]
| You gotta walk it by yourself,
|(?bar) Nobody here can walk it for you,
|    You gotta walk it by yourself.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
You gotta walk that lonesome valley,<span style="color: brown">[]</span><br>
You gotta walk it by yourself,<br>
Nobody here can walk it for you,<br>
   You gotta walk it by yourself.<br>

<h4>Intended output (space normalized)</h4>
<pre>&lt;line name="foo2"&gt;You gotta walk that lonesome valley,&lt;citation extra="page 22" idref="bing"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line conditions="bar"&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;line name="foo2"&gt;You gotta walk that lonesome valley,&lt;citation extra="page 22" idref="bing"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line conditions="bar"&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516875644">Case: Lines inside a blockquote</h3>

<p>Lines should work inside a block quote.</p>

<h4>Source</h4>
<pre>
"""[*bing page 22]
    |(#foo2) You gotta walk that lonesome valley,[%bing page 22]
    | You gotta walk it by yourself,
    |(?bar) Nobody here can walk it for you,
    |    You gotta walk it by yourself.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<blockquote>
<span style="color: brown">[]</span>
You gotta walk that lonesome valley,<span style="color: brown">[]</span><br>
You gotta walk it by yourself,<br>
Nobody here can walk it for you,<br>
   You gotta walk it by yourself.<br>
</blockquote>

<h4>Intended output (space normalized)</h4>
<pre>&lt;blockquote&gt; &lt;citation extra="page 22" idref="bing"/&gt; &lt;line name="foo2"&gt;You gotta walk that lonesome valley,&lt;citation extra="page 22" keyref="bing"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line conditions="bar"&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt; &lt;/blockquote&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;blockquote&gt; &lt;citation extra="page 22" idref="bing"/&gt; &lt;line name="foo2"&gt;You gotta walk that lonesome valley,&lt;citation extra="page 22" keyref="bing"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line conditions="bar"&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt; &lt;/blockquote&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516868220">Test: Attributes</h2>

<p>SAM supports four explicit attributes: ids, names, conditions, and language. There is no general attribute mechanism such as that in XML. You can generally encode the same data in SAM using fields or annotations.</p>
<p>Attributes can be applied to blocks, phrases, and inserts. You cannot apply attributes to a paragraph, but you can wrap a paragraph in a fragment and apply attributes to the fragment.</p>
<p>Attributes are applied using annotation markup, but with a specific initial character to denote each kind of attribute:</p>
<ul>
<li>
<p><code>(*id)</code> creates an ID attribute.</p>
</li>
<li>
<p><code>(#name)</code> creates a name attribute.</p>
</li>
<li>
<p><code>(?condition)</code> creates a condition attribute.</p>
</li>
<li>
<p><code>(!en-CA)</code> creates a language attribute.</p>
</li>
</ul>
<p>You can only apply one id, name, or language attribute to a block or phrase. You can apply more than one condition attribute. On output to XML, the condition attributes will be converted to a single <code>conditions</code> attribute with the individual conditions separated by commas. (For which reason, condition statements can’t include commas.)</p>


<h3 id="idm516863228">Case: Attributes on block</h3>
Attributes on a block
<h4>Source</h4>
<pre>
block:(!en-CA)(*id2)(#name)(?a)(?b) Title

    Content of the block.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<block conditions="a,b" id="id2" name="name" xml:lang="en-CA">
<title>Title</title>
<p>Content of the block.</p>
</block>

<h4>Intended output (space normalized)</h4>
<pre>&lt;block conditions="a,b" id="id2" name="name" xml:lang="en-CA"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;p&gt;Content of the block.&lt;/p&gt; &lt;/block&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;block conditions="a,b" id="id2" name="name" xml:lang="en-CA"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;p&gt;Content of the block.&lt;/p&gt; &lt;/block&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516853628">Case: Attributes on field</h3>
Attributes on a field
<h4>Source</h4>
<pre>
field:(!en-CA)(*id3)(#name)(?a)(?b) Value of the field.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<field conditions="a,b" id="id3" name="name" xml:lang="en-CA">Value of the field.</field>

<h4>Intended output (space normalized)</h4>
<pre>&lt;field conditions="a,b" id="id3" name="name" xml:lang="en-CA"&gt;Value of the field.&lt;/field&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;field conditions="a,b" id="id3" name="name" xml:lang="en-CA"&gt;Value of the field.&lt;/field&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516980732">Case: Attributes on fragment</h3>
Attributes on a fragment
<h4>Source</h4>
<pre>
~~~(!en-CA)(*id4)(#name)(?a)(?b)

    Content of the fragment.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<fragment conditions="a,b" id="id4" name="name" xml:lang="en-CA">
<p>Content of the fragment.</p>
</fragment>

<h4>Intended output (space normalized)</h4>
<pre>&lt;fragment conditions="a,b" id="id4" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Content of the fragment.&lt;/p&gt; &lt;/fragment&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;fragment conditions="a,b" id="id4" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Content of the fragment.&lt;/p&gt; &lt;/fragment&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516981372">Case: attributes on grid</h3>
Attributes on a grid
<h4>Source</h4>
<pre>
+++(!en-CA)(*id5)(#name)(?a)(?b)

    Content | of
    the     | grid.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td>Content</td>
<td>of</td>
</tr>
<tr>
<td>the</td>
<td>grid.</td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid conditions="a,b" id="id5" name="name" xml:lang="en-CA"&gt; &lt;row&gt; &lt;cell&gt;Content&lt;/cell&gt; &lt;cell&gt;of&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;the&lt;/cell&gt; &lt;cell&gt;grid.&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid conditions="a,b" id="id5" name="name" xml:lang="en-CA"&gt; &lt;row&gt; &lt;cell&gt;Content&lt;/cell&gt; &lt;cell&gt;of&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;the&lt;/cell&gt; &lt;cell&gt;grid.&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516969340">Case: attributes on record set</h3>
Attributes on a record set
<h4>Source</h4>
<pre>
recordset::(!en-CA)(*id6)(#name)(?a)(?b) foo, bar

    a, b
    c, d
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<recordset conditions="a,b" id="id6" name="name" xml:lang="en-CA">
<record>
<foo>a</foo>
<bar>b</bar>
</record>
<record>
<foo>c</foo>
<bar>d</bar>
</record>
</recordset>

<h4>Intended output (space normalized)</h4>
<pre>&lt;recordset conditions="a,b" id="id6" name="name" xml:lang="en-CA"&gt; &lt;record&gt; &lt;foo&gt;a&lt;/foo&gt; &lt;bar&gt;b&lt;/bar&gt; &lt;/record&gt; &lt;record&gt; &lt;foo&gt;c&lt;/foo&gt; &lt;bar&gt;d&lt;/bar&gt; &lt;/record&gt; &lt;/recordset&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;recordset conditions="a,b" id="id6" name="name" xml:lang="en-CA"&gt; &lt;record&gt; &lt;foo&gt;a&lt;/foo&gt; &lt;bar&gt;b&lt;/bar&gt; &lt;/record&gt; &lt;record&gt; &lt;foo&gt;c&lt;/foo&gt; &lt;bar&gt;d&lt;/bar&gt; &lt;/record&gt; &lt;/recordset&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516961916">Case: Attributes on unordered list</h3>

<p>Attributes on an unordered list item.</p>

<h4>Source</h4>
<pre>
* Fred

*(!en-CA)(*id7)(#name)(?a)(?b) Barney and
                               Betty and
                               Bam Bam.

* Wilma
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>Fred</p>
</li>
<li conditions="a,b" id="id7" name="name" xml:lang="en-CA">
<p>Barney and Betty and Bam Bam.</p>
</li>
<li>
<p>Wilma</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="a,b" id="id7" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="a,b" id="id7" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516951164">Case: Attributes on ordered list</h3>

<p>Attributes on an ordered list item.</p>

<h4>Source</h4>
<pre>
1. Fred
2.(!en-CA)(*id8)(#name)(?a)(?b) Barney and
                                Betty and
                                Bam Bam.
3. Wilma
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>Fred</p>
</li>
<li conditions="a,b" id="id8" name="name" xml:lang="en-CA">
<p>Barney and Betty and Bam Bam.</p>
</li>
<li>
<p>Wilma</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="a,b" id="id8" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="a,b" id="id8" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516954364">Case: Attributes on labeled list</h3>

<p>Attributes on a labeled list item.</p>

<h4>Source</h4>
<pre>
|Do|(#foo7)(?bar)(?green) a deer,
                          a female deer

|Re| a drop of
     golden sun

     Is it a particle or a wave?
|Me|(*bananas) a name I call myself
|Fa| a long long way to run
|So| a needle pulling thread
|La| a note to follow so
|Te| a drink with jam and bread
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>



<p><b>Do: </b>a deer, a female deer</p>



<p><b>Re: </b>a drop of golden sun</p>
<p>Is it a particle or a wave?</p>



<p><b>Me: </b>a name I call myself</p>



<p><b>Fa: </b>a long long way to run</p>



<p><b>So: </b>a needle pulling thread</p>



<p><b>La: </b>a note to follow so</p>



<p><b>Te: </b>a drink with jam and bread</p>



<h4>Intended output (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li conditions="bar,green" name="foo7"&gt; &lt;label&gt;Do&lt;/label&gt; &lt;p&gt;a deer, a female deer&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Re&lt;/label&gt; &lt;p&gt;a drop of golden sun&lt;/p&gt; &lt;p&gt;Is it a particle or a wave?&lt;/p&gt; &lt;/li&gt; &lt;li id="bananas"&gt; &lt;label&gt;Me&lt;/label&gt; &lt;p&gt;a name I call myself&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Fa&lt;/label&gt; &lt;p&gt;a long long way to run&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;So&lt;/label&gt; &lt;p&gt;a needle pulling thread&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;La&lt;/label&gt; &lt;p&gt;a note to follow so&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Te&lt;/label&gt; &lt;p&gt;a drink with jam and bread&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li conditions="bar,green" name="foo7"&gt; &lt;label&gt;Do&lt;/label&gt; &lt;p&gt;a deer, a female deer&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Re&lt;/label&gt; &lt;p&gt;a drop of golden sun&lt;/p&gt; &lt;p&gt;Is it a particle or a wave?&lt;/p&gt; &lt;/li&gt; &lt;li id="bananas"&gt; &lt;label&gt;Me&lt;/label&gt; &lt;p&gt;a name I call myself&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Fa&lt;/label&gt; &lt;p&gt;a long long way to run&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;So&lt;/label&gt; &lt;p&gt;a needle pulling thread&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;La&lt;/label&gt; &lt;p&gt;a note to follow so&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Te&lt;/label&gt; &lt;p&gt;a drink with jam and bread&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516940668">Case: Attributes on lines</h3>

<p>Lines with annotations:</p>

<h4>Source</h4>
<pre>
|(!en-CA)(*id9)(#name)(?a)(?b) You gotta walk that lonesome valley,[*bing page 22]
| You gotta walk it by yourself,
| Nobody here can walk it for you,
|    You gotta walk it by yourself.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
You gotta walk that lonesome valley,<span style="color: brown">[]</span><br>
You gotta walk it by yourself,<br>
Nobody here can walk it for you,<br>
   You gotta walk it by yourself.<br>

<h4>Intended output (space normalized)</h4>
<pre>&lt;line conditions="a,b" id="id9" name="name" xml:lang="en-CA"&gt;You gotta walk that lonesome valley,&lt;citation extra="page 22" idref="bing"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;line conditions="a,b" id="id9" name="name" xml:lang="en-CA"&gt;You gotta walk that lonesome valley,&lt;citation extra="page 22" idref="bing"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516926716">Case: Attributes on blockquote</h3>

<p>A blockquote with attributes and a citation.</p>

<h4>Source</h4>
<pre>
After this paragraph, there is a blockquote:

"""(!en-CA)(*id10)(#name)(?a)(?b)[*cit]
    The quick brown fox jumps over the lazy dog.

    And the {cow}(beast "bovine")[Mother Goose] jumps over the moon.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>After this paragraph, there is a blockquote:</p>
<blockquote conditions="a,b" id="id10" name="name" xml:lang="en-CA">
<span style="color: brown">[]</span>
<p>The quick brown fox jumps over the lazy dog.</p>
<p>And the <span style="color: green"><span style="color: red">cow<span style="color: brown">[Mother Goose]</span></span></span> jumps over the moon.</p>
</blockquote>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;After this paragraph, there is a blockquote:&lt;/p&gt; &lt;blockquote conditions="a,b" id="id10" name="name" xml:lang="en-CA"&gt; &lt;citation idref="cit"/&gt; &lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;p&gt;And the &lt;phrase&gt;&lt;annotation type="beast" specifically="bovine"&gt;&lt;citation value="Mother Goose"&gt;cow&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; jumps over the moon.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;After this paragraph, there is a blockquote:&lt;/p&gt; &lt;blockquote conditions="a,b" id="id10" name="name" xml:lang="en-CA"&gt; &lt;citation idref="cit"/&gt; &lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;p&gt;And the &lt;phrase&gt;&lt;annotation type="beast" specifically="bovine"&gt;&lt;citation value="Mother Goose"&gt;cow&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; jumps over the moon.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516919420">Case: Attributes on a phrase</h3>

<p>Attributes on a phrase.</p>

<h4>Source</h4>
<pre>
{The Duke}(actor "John Wayne")(!en-CA)(*id11)(#name)(?a)(?b)[*cit] plays Rooster Cogburn.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><span style="color: green"><span style="color: red">The Duke<span style="color: brown">[]</span></span></span> plays Rooster Cogburn.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase conditions="a,b" id="id11" name="name" xml:lang="en-CA"&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;citation idref="cit"&gt;The Duke&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase conditions="a,b" id="id11" name="name" xml:lang="en-CA"&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;citation idref="cit"&gt;The Duke&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516922492">Case: Attributes on a codeblock</h3>

<p>Attributes on a codeblock.</p>

<h4>Source</h4>
<pre>
```(python)(*id12)(#name)(?a)(?b)
    def escape_for_xml(s):
        t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
        try:
            return s.translate(t)
        except AttributeError:
            return s
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
def escape_for_xml(s):
    t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
    try:
        return s.translate(t)
    except AttributeError:
        return s
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock conditions="a,b" id="id12" language="python" name="name"&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock conditions="a,b" id="id12" language="python" name="name"&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516910332">Case: Attributes on an embed</h3>

<p>Attributes on a embed.</p>

<h4>Source</h4>
<pre>
```(=latexmathml)(*id14)(#name)(?a)(?b)
    n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<embedblock conditions="a,b" encoding="latexmathml" id="id14" name="name">
n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k
</embedblock>

<h4>Intended output (space normalized)</h4>
<pre>&lt;embedblock conditions="a,b" encoding="latexmathml" id="id14" name="name"&gt; n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k &lt;/embedblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;embedblock conditions="a,b" encoding="latexmathml" id="id14" name="name"&gt; n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k &lt;/embedblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516913788">Case: Attributes on inserts</h3>

<p>Attributes on inserts.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;(image foo.gif)(*id15)(#name)(?a)(?b)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert conditions="a,b" id="id15" item="foo.gif" name="name" type="image"></insert>

<h4>Intended output (space normalized)</h4>
<pre>&lt;insert conditions="a,b" id="id15" item="foo.gif" name="name" type="image"/&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert conditions="a,b" id="id15" item="foo.gif" name="name" type="image"/&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516903676">Case: Attributes on inserts</h3>

<p>Attributes on inserts.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;(image bar.png)(#baz)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert item="bar.png" name="baz" type="image"></insert>

<h4>Intended output (space normalized)</h4>
<pre>&lt;insert item="bar.png" name="baz" type="image"/&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert item="bar.png" name="baz" type="image"/&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516893820">Test: Annotations</h2>

<p>A phrase can have one or more annotations or citations attached to it. On output, the text of the phrase is wrapped in the annotations and citations in the order they were specified in source.</p>


<h3 id="idm516894972">Case: Multiple annotations</h3>

<p>Phrases with more than one attribute in a chain.</p>

<h4>Source</h4>
<pre>
This is {very}(bold) important.

This is {very}(bold)(italic) important.

This is {very}(bold)(italic)(green) important.

This `foo`(bar) baz.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This is <span style="color: green"><b>very</b></span> important.</p>
<p>This is <span style="color: green"><b><i>very</i></b></span> important.</p>
<p>This is <span style="color: green"><b><i><span style="color: red">very</span></i></b></span> important.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;very&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt; &lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;annotation type="italic"&gt;very&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt; &lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;annotation type="italic"&gt;&lt;annotation type="green"&gt;very&lt;/annotation&gt;&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;very&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt; &lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;annotation type="italic"&gt;very&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt; &lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;annotation type="italic"&gt;&lt;annotation type="green"&gt;very&lt;/annotation&gt;&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516888444">Case: Consecutive Annotations</h3>

<p>Two separate annotations with no space between them.</p>

<h4>Source</h4>
<pre>
{The Duke}(actor "John Wayne")(if "1969"){Jeff Bridges}(actor)(if "2010") plays Rooster Cogburn.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><span style="color: green"><span style="color: red">
        [The Duke]?
    </span></span><span style="color: green"><span style="color: red">
        [Jeff Bridges]?
    </span></span> plays Rooster Cogburn.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;annotation type="if" specifically="1969"&gt;The Duke&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt;&lt;phrase&gt;&lt;annotation type="actor"&gt;&lt;annotation type="if" specifically="2010"&gt;Jeff Bridges&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;annotation type="if" specifically="1969"&gt;The Duke&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt;&lt;phrase&gt;&lt;annotation type="actor"&gt;&lt;annotation type="if" specifically="2010"&gt;Jeff Bridges&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516885372">Case: Consecutive Annotations on decorations</h3>

<p>Two separate annotations with no space between them.</p>

<h4>Source</h4>
<pre>
{The Duke}(actor "John Wayne")(if "1969"){Jeff Bridges}(actor)(if "2010") plays Rooster Cogburn.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><span style="color: green"><span style="color: red">
        [The Duke]?
    </span></span><span style="color: green"><span style="color: red">
        [Jeff Bridges]?
    </span></span> plays Rooster Cogburn.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;annotation type="if" specifically="1969"&gt;The Duke&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt;&lt;phrase&gt;&lt;annotation type="actor"&gt;&lt;annotation type="if" specifically="2010"&gt;Jeff Bridges&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;annotation type="if" specifically="1969"&gt;The Duke&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt;&lt;phrase&gt;&lt;annotation type="actor"&gt;&lt;annotation type="if" specifically="2010"&gt;Jeff Bridges&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516883580">Case: Annotation followed by citation</h3>

<p>Observed in the wild: When an annotated phrase was followed by a phrase with a citation, the end of the annotation was not found and the two structures were recognized as one long citation.</p>

<h4>Source</h4>
<pre>
When using the map approach, it is important to
think about how your content will {single
source}(concept "single sourcing") to paper-like
media and hypertext-media. Some people will output
the same map to to both media. In hyper-text media
that usually results in the map being turned into
a table of contents, often displayed in a separate
pane as in a help system. This may be fine if you
are creating a help system, but it is not how Web
content is usually displayed. Another approach to
single sourcing content that uses the assemble from
pieces approach is to create completely separate maps
-- or even to use completely different assembly
techniques that don't involve maps at all -- to produce
paper-like and hypertext outputs. This can help you
to work around some of the design limitations that
we talked about in the {single sourcing
chapter}[#single_source].
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>When using the map approach, it is important to think about how your content will <span style="color: green"><span style="color: red">single source</span></span> to paper-like media and hypertext-media. Some people will output the same map to to both media. In hyper-text media that usually results in the map being turned into a table of contents, often displayed in a separate pane as in a help system. This may be fine if you are creating a help system, but it is not how Web content is usually displayed. Another approach to single sourcing content that uses the assemble from pieces approach is to create completely separate maps – or even to use completely different assembly techniques that don’t involve maps at all – to produce paper-like and hypertext outputs. This can help you to work around some of the design limitations that we talked about in the <span style="color: green">single sourcing chapter<span style="color: brown">[]</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;When using the map approach, it is important to think about how your content will &lt;phrase&gt;&lt;annotation type="concept" specifically="single sourcing"&gt;single source&lt;/annotation&gt;&lt;/phrase&gt; to paper-like media and hypertext-media. Some people will output the same map to to both media. In hyper-text media that usually results in the map being turned into a table of contents, often displayed in a separate pane as in a help system. This may be fine if you are creating a help system, but it is not how Web content is usually displayed. Another approach to single sourcing content that uses the assemble from pieces approach is to create completely separate maps – or even to use completely different assembly techniques that don’t involve maps at all – to produce paper-like and hypertext outputs. This can help you to work around some of the design limitations that we talked about in the &lt;phrase&gt;&lt;citation nameref="single_source"&gt;single sourcing chapter&lt;/citation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;When using the map approach, it is important to think about how your content will &lt;phrase&gt;&lt;annotation type="concept" specifically="single sourcing"&gt;single source&lt;/annotation&gt;&lt;/phrase&gt; to paper-like media and hypertext-media. Some people will output the same map to to both media. In hyper-text media that usually results in the map being turned into a table of contents, often displayed in a separate pane as in a help system. This may be fine if you are creating a help system, but it is not how Web content is usually displayed. Another approach to single sourcing content that uses the assemble from pieces approach is to create completely separate maps – or even to use completely different assembly techniques that don’t involve maps at all – to produce paper-like and hypertext outputs. This can help you to work around some of the design limitations that we talked about in the &lt;phrase&gt;&lt;citation nameref="single_source"&gt;single sourcing chapter&lt;/citation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516712236">Case: Annotation with language metadata</h3>

<p>You can add language metadata to a phrase.</p>

<h4>Source</h4>
<pre>
Press {Enter}(key)(!fr-CA)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Press <span style="color: green"><span style="color: red">Enter</span></span></p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Press &lt;phrase xml:lang="fr-CA"&gt;&lt;annotation type="key"&gt;Enter&lt;/annotation&gt;&lt;/phrase&gt;&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Press &lt;phrase xml:lang="fr-CA"&gt;&lt;annotation type="key"&gt;Enter&lt;/annotation&gt;&lt;/phrase&gt;&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516710828">Case: Annotation with a condition</h3>

<p>You can add condition metadata to a phrase.</p>

<h4>Source</h4>
<pre>
Press {Enter}(key)(?foo)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Press <span style="color: green"><span style="color: red">Enter</span></span></p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Press &lt;phrase conditions="foo"&gt;&lt;annotation type="key"&gt;Enter&lt;/annotation&gt;&lt;/phrase&gt;&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Press &lt;phrase conditions="foo"&gt;&lt;annotation type="key"&gt;Enter&lt;/annotation&gt;&lt;/phrase&gt;&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516702508">Case: Prior annotation lookup</h3>

<p>If a phrase has no annotation or citation attached to it, the parser will attempt to find a suitable annotation by searching back up the document for the most recent case of the same phrase. If it finds one, it will copy the annotations and citations from that phrase to the current one. This prevents writers from having to write the same annotation out over and over again. If not prior phrase is found, a warning is issued.</p>

<h4>Source</h4>
<pre>
This {annotation}(https://en.wikipedia.org/wiki/Annotation) is repeated {annotation}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This <span style="color: green"><a href="https://en.wikipedia.org/wiki/Annotation">annotation</a></span> is repeated <span style="color: green"><a href="https://en.wikipedia.org/wiki/Annotation">annotation</a></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt; is repeated &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt; is repeated &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516822316">Case: Case insensitive lookup</h3>

<p>Annotation lookup is case insensitive unless the annotation-lookup declaration is set to <code>case sensitive</code>.</p>

<h4>Source</h4>
<pre>
This {annotation}(https://en.wikipedia.org/wiki/Annotation) is repeated {Annotation}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This <span style="color: green"><a href="https://en.wikipedia.org/wiki/Annotation">annotation</a></span> is repeated <span style="color: green"><a href="https://en.wikipedia.org/wiki/Annotation">Annotation</a></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt; is repeated &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;Annotation&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt; is repeated &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;Annotation&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516825644">Case: Case insensitive lookup with multiple annotations</h3>

<p>Make sure all annotations are copied</p>

<h4>Source</h4>
<pre>
This {annotation}(foo)(https://en.wikipedia.org/wiki/Annotation) is repeated {Annotation}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This <span style="color: green"><span style="color: red"><a href="https://en.wikipedia.org/wiki/Annotation">annotation</a></span></span> is repeated <span style="color: green"><span style="color: red"><a href="https://en.wikipedia.org/wiki/Annotation">Annotation</a></span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="foo"&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; is repeated &lt;phrase&gt;&lt;annotation type="foo"&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;Annotation&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="foo"&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; is repeated &lt;phrase&gt;&lt;annotation type="foo"&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;Annotation&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516813100">Case: Prior annotation lookup in included file</h3>

<p>Look up annotations in included files.</p>

<h4>Source</h4>
<pre>
Annotation lookup test: {test phrase}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Annotation lookup test: <span style="color: green"><span style="color: red">test phrase</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Annotation lookup test: &lt;phrase&gt;&lt;annotation type="test"&gt;test phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Annotation lookup test: &lt;phrase&gt;&lt;annotation type="test"&gt;test phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516807852">Case: Earlier para</h3>

<p>The marching annotation is in an earlier paragraph in the document. (In this case, in the preceding test case).</p>

<h4>Source</h4>
<pre>
This {annotation} occurs previously.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This <span style="color: green"><span style="color: red"><a href="https://en.wikipedia.org/wiki/Annotation">annotation</a></span></span> occurs previously.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="foo"&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; occurs previously.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="foo"&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; occurs previously.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516808108">Case: Failure</h3>

<p>There is no previous phrase. This should generate a warning when the test is run.</p>

<h4>Source</h4>
<pre>
This {should be reported}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This <span style="color: green">should be reported</span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;should be reported&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;should be reported&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516801708">Case: Local only annotations</h3>

<p>A local-only annotation is one which applies only to the current phrase. It is not taken into consideration in annotation lookup, so the lookup search will proceed to the next phrase with the same text. Annotation lookup will occur for a phrase with a local-only annotation, and the local annotation will be added to the looked up annotations, if any.</p>

<h4>Source</h4>
<pre>
Testing {XML}(language) testing {XML}+(index) testing {XML}+(language).
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Testing <span style="color: green"><span style="color: red">XML</span></span> testing <span style="color: green"><span style="color: red"><span style="color: red">XML</span></span></span> testing <span style="color: green"><span style="color: red">XML</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516788396">Case: Attribute annotations</h3>

<p>Attributes like ID should not be copied because they are supposed to be unique.</p>

<h4>Source</h4>
<pre>
Testing {XML}+(*foot) testing {XML}+(index) testing {XML}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Testing <span style="color: green"><span style="color: red">XML</span></span> testing <span style="color: green"><span style="color: red"><span style="color: red">XML</span></span></span> testing <span style="color: green"><span style="color: red">XML</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase id="foot"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase id="foot"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516791340">Case: Mix of local and global</h3>

<p>A mix of local and global annotations.</p>

<h4>Source</h4>
<pre>
Testing {XML}+(foo)(language) testing {XML}+(index) testing {XML}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Testing <span style="color: green"><span style="color: red"><span style="color: red">XML</span></span></span> testing <span style="color: green"><span style="color: red"><span style="color: red">XML</span></span></span> testing <span style="color: green"><span style="color: red">XML</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase&gt;&lt;annotation type="foo"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase&gt;&lt;annotation type="foo"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516784556">Case: Multiple local</h3>

<p>Multiple local annotations.</p>

<h4>Source</h4>
<pre>
Testing {XML}+(foobar)+(verbiage) testing {XML}+(index) testing {XML}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Testing <span style="color: green"><span style="color: red"><span style="color: red"><span style="color: red">XML</span></span></span></span> testing <span style="color: green"><span style="color: red"><span style="color: red">XML</span></span></span> testing <span style="color: green"><span style="color: red">XML</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase&gt;&lt;annotation type="foobar"&gt;&lt;annotation type="verbiage"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Testing &lt;phrase&gt;&lt;annotation type="foobar"&gt;&lt;annotation type="verbiage"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="index"&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; testing &lt;phrase&gt;&lt;annotation type="language"&gt;XML&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516773420">Test: Decorations</h2>

<p>A decoration is a shortcut for a <span style="color: green"><span style="color: red">media domain</span></span> annotation. Three decorations are supported, bold, italic, and code.</p>


<h3 id="idm516774956">Case: Bold, italic, and code</h3>

<p>One test case for all decorations.</p>

<h4>Source</h4>
<pre>
This sentence contains decorations for *bold*, _italic_, and `code`.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This sentence contains decorations for <span style="color: green"><b>bold</b></span>, <span style="color: green"><i>italic</i></span>, and <code>code</code>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This sentence contains decorations for &lt;phrase&gt;&lt;annotation type="bold"&gt;bold&lt;/annotation&gt;&lt;/phrase&gt;, &lt;phrase&gt;&lt;annotation type="italic"&gt;italic&lt;/annotation&gt;&lt;/phrase&gt;, and &lt;code&gt;code&lt;/code&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This sentence contains decorations for &lt;phrase&gt;&lt;annotation type="bold"&gt;bold&lt;/annotation&gt;&lt;/phrase&gt;, &lt;phrase&gt;&lt;annotation type="italic"&gt;italic&lt;/annotation&gt;&lt;/phrase&gt;, and &lt;code&gt;code&lt;/code&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516765612">Case: Unbalanced decorations and escapes</h3>

<p>Unbalanced decorations and escapes</p>

<h4>Source</h4>
<pre>
In Rio Bravo, \*the \`Duke (see: https://en.wikipedia.org/wiki/John_Wayne) plays *an ex-Union colonel `out for revenge.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>In Rio Bravo, *the `Duke (see: https://en.wikipedia.org/wiki/John_Wayne) plays *an ex-Union colonel `out for revenge.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;In Rio Bravo, *the `Duke (see: https://en.wikipedia.org/wiki/John_Wayne) plays *an ex-Union colonel `out for revenge.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;In Rio Bravo, *the `Duke (see: https://en.wikipedia.org/wiki/John_Wayne) plays *an ex-Union colonel `out for revenge.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516760236">Test: Inline code</h2>

<p>Inline code is a special form of phrase used for phrases that are in computer languages or other encodings other than the human language of the text.</p>


<h3 id="idm516755628">Case: Inline latexmath</h3>

<p>A selection of latex math to be printed.</p>

<h4>Source</h4>
<pre>
This is an equation `\frac{ \sum_{t=0}^{N}f(t,k) }{N}`(latexmath)(!en) in the middle of a paragraph. 
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This is an equation <code language="latexmath" xml:lang="en">\frac{ \sum_{t=0}^{N}f(t,k) }{N}</code> in the middle of a paragraph.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This is an equation &lt;code language="latexmath" xml:lang="en"&gt;\frac{ \sum_{t=0}^{N}f(t,k) }{N}&lt;/code&gt; in the middle of a paragraph.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This is an equation &lt;code language="latexmath" xml:lang="en"&gt;\frac{ \sum_{t=0}^{N}f(t,k) }{N}&lt;/code&gt; in the middle of a paragraph.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516759084">Case: Embedded latexmath</h3>

<p>A selection of latex math to be embedded as an equation.</p>

<h4>Source</h4>
<pre>
This is an equation `\frac{ \sum_{t=0}^{N}f(t,k) }{N}`(=latexmath) in the middle of a paragraph. 
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This is an equation <embed encoding="latexmath">\frac{ \sum_{t=0}^{N}f(t,k) }{N}</embed> in the middle of a paragraph.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This is an equation &lt;embed encoding="latexmath"&gt;\frac{ \sum_{t=0}^{N}f(t,k) }{N}&lt;/embed&gt; in the middle of a paragraph.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This is an equation &lt;embed encoding="latexmath"&gt;\frac{ \sum_{t=0}^{N}f(t,k) }{N}&lt;/embed&gt; in the middle of a paragraph.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516746284">Test: Links</h2>

<p>Links are created with an annotation.</p>
<p>You can specify a link as a <code>link</code> annotation.</p>
<pre>
foo {bar}(link "http://example.com/bar") baz
</pre>
<p>The link annotation shortcut lets you shorten this to:</p>
<pre>
foo {bar}(http://example.com/bar) baz
</pre>
<p>However, use of the shortcut means you need to escape any parens that occur in the URL.</p>


<h3 id="idm516746796">Case: Parens not escaped</h3>

<p>The parens are not escaped, causing misreading of markup. This example should be interpreted incorrectly.</p>

<h4>Source</h4>
<pre>
Rio Bravo refers to the movie
(and not to {the city in Texas or
the nature reserve in
Belize}(https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)))
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Rio Bravo refers to the movie (and not to <span style="color: green"><a href="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_">the city in Texas or the nature reserve in Belize</a></span>)</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_" namespace="disambiguation"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_" namespace="disambiguation"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516738860">Case: Parens escaped with backslashes</h3>

<p>The parens in the URL are escaped with blackslashes. This example should be interpreted correctly.</p>

<h4>Source</h4>
<pre>
Rio Bravo refers to the movie
(and not to {the city in Texas or
the nature reserve in
Belize}(https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_\(disambiguation\)))
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Rio Bravo refers to the movie (and not to <span style="color: green"><a href="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)">the city in Texas or the nature reserve in Belize</a></span>)</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516735660">Case: Using explicit link annotation instead of shortcut</h3>

<p>The link is specified using a specific link annotation so the URL is not in parens itself. This example should be interpreted correctly.</p>

<h4>Source</h4>
<pre>
Rio Bravo refers to the movie
(and not to {the city in Texas or
the nature reserve in
Belize}(link "https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"))
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Rio Bravo refers to the movie (and not to <span style="color: green"><a href="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)">the city in Texas or the nature reserve in Belize</a></span>)</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516734636">Test: Citations</h2>

<p>A citation is a reference to a source of information. You can cite with a phrase or by reference to an ID or a name.</p>


<h3 id="idm516731948">Case: Citation on phrase</h3>

<p>A citation on a phrase</p>

<h4>Source</h4>
<pre>
You can {call me Ishmael}[Melville, 1851][Daffy, 2017].
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>You can <span style="color: green">call me Ishmael<span style="color: brown">[Daffy, 2017]</span><span style="color: brown">[Melville, 1851]</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;You can &lt;phrase&gt;&lt;citation value="Melville, 1851"&gt;&lt;citation value="Daffy, 2017"&gt;call me Ishmael&lt;/citation&gt;&lt;/citation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;You can &lt;phrase&gt;&lt;citation value="Melville, 1851"&gt;&lt;citation value="Daffy, 2017"&gt;call me Ishmael&lt;/citation&gt;&lt;/citation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516721836">Case: Citation and annotation on one phrase</h3>

<p>A citation on a phrase that also has an annotation.</p>

<h4>Source</h4>
<pre>
You can {call me Ishmael}(quote)[Melville, 1851].
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>You can <span style="color: green"><span style="color: red">call me Ishmael<span style="color: brown">[Melville, 1851]</span></span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;You can &lt;phrase&gt;&lt;annotation type="quote"&gt;&lt;citation value="Melville, 1851"&gt;call me Ishmael&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;You can &lt;phrase&gt;&lt;annotation type="quote"&gt;&lt;citation value="Melville, 1851"&gt;call me Ishmael&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516714156">Case: Literal square brackets</h3>

<p>If you want to enter literal square brackets, rather than create a citation, escape the opening square bracket with a backslash.</p>

<h4>Source</h4>
<pre>
Press \[Enter].
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Press [Enter].</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Press [Enter].&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Press [Enter].&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516714284">Case: Multiple citations is a paragraph</h3>

<p>Making sure that when there are multiple citations in a paragraph they are all detected separately.</p>

<h4>Source</h4>
<pre>
Among its default processing steps, the SPFE process includes the subject-based linking algorithms described in [#chapter.linking] and the subject-based composition and architecture algorithms described in [#chapter.composition] and [#chapter.architecture], including bottom-up information architecture.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Among its default processing steps, the SPFE process includes the subject-based linking algorithms described in <span style="color: brown">[]</span> and the subject-based composition and architecture algorithms described in <span style="color: brown">[]</span> and <span style="color: brown">[]</span>, including bottom-up information architecture.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Among its default processing steps, the SPFE process includes the subject-based linking algorithms described in &lt;citation nameref="chapter.linking"/&gt; and the subject-based composition and architecture algorithms described in &lt;citation nameref="chapter.composition"/&gt; and &lt;citation nameref="chapter.architecture"/&gt;, including bottom-up information architecture.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Among its default processing steps, the SPFE process includes the subject-based linking algorithms described in &lt;citation nameref="chapter.linking"/&gt; and the subject-based composition and architecture algorithms described in &lt;citation nameref="chapter.composition"/&gt; and &lt;citation nameref="chapter.architecture"/&gt;, including bottom-up information architecture.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516590540">Test: Characters</h2>

<p>All SAM documents are UTF-8 unicode documents. Therefore you should be able to enter any character directly. However, typing extended characters is not easy, so SAM supports character entities for entering characters that are not easy to type.</p>


<h3 id="idm516598092">Case: HTML named entities</h3>

<p>All of the HTML named character entities are supported.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs &amp;pound;5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs £5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs £5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs £5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516592972">Case: Numeric entities</h3>

<p>XML-style decimal numeric character entities are supported.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs &amp;#163;5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs £5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs £5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs £5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516589260">Case: Hexadecimal entity</h3>

<p>XML-style hexadecimal numeric character entities are supported.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs &amp;#xA3;5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs £5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs £5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs £5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516586572">Case: Character entities inside phrases and decorations</h3>

<p>Make sure entities are recognized in phrases and decorations.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs *&amp;#xA3;*5.00.

The doggy in the window costs {&amp;#xA3;5.00}(money).
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs <span style="color: green"><b>£</b></span>5.00.</p>
<p>The doggy in the window costs <span style="color: green"><span style="color: red">£5.00</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="bold"&gt;£&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt; &lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="money"&gt;£5.00&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="bold"&gt;£&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt; &lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="money"&gt;£5.00&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516574924">Case: In code annotation shortcut:</h3>

<p>In a code decoration, character entities are not expanded.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs `&amp;#xA3;`5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs <code>&amp;#xA3;</code>5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;code&gt;&amp;amp;#xA3;&lt;/code&gt;5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;code&gt;&amp;amp;#xA3;&lt;/code&gt;5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516571724">Case: In bold decoration escaped:</h3>

<p>Escaped version inside a bold decoration.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs *\&amp;#xA3;*5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs <span style="color: green"><b>&amp;#xA3;</b></span>5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="bold"&gt;&amp;amp;#xA3;&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="bold"&gt;&amp;amp;#xA3;&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516568780">Case: Ampersand in a sentence, escaped with \ and not escaped.</h3>

<p>Unlike XML, SAM does not require that an ampersand be escaped if it is not part of a character entity. You can escape it if you want to using a backslash. Both should output in XML as <code>&amp;amp;</code></p>

<h4>Source</h4>
<pre>
The cat &amp; the dog.

The cat \&amp; the dog.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The cat &amp; the dog.</p>
<p>The cat &amp; the dog.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The cat &amp;amp; the dog.&lt;/p&gt; &lt;p&gt;The cat &amp;amp; the dog.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The cat &amp;amp; the dog.&lt;/p&gt; &lt;p&gt;The cat &amp;amp; the dog.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516563020">Test: Character escapes</h2>

<p>Character escaping</p>


<h3 id="idm516558028">Case: Escapes in explicit annotations</h3>

<p>Escaping curly braces and backslashes inside a phrase.</p>

<h4>Source</h4>
<pre>
There is a curly brace and two backslashes in {this \\\\\{ phrase}(bold).
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>There is a curly brace and two backslashes in <span style="color: green"><b>this \\{ phrase</b></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;There is a curly brace and two backslashes in &lt;phrase&gt;&lt;annotation type="bold"&gt;this \\{ phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;There is a curly brace and two backslashes in &lt;phrase&gt;&lt;annotation type="bold"&gt;this \\{ phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516681804">Case: Escapes in code decorations</h3>

<p>Code decorations have different escaping rules. All characters are literal except that the backtick character can be escaped with a double back tick. Character entities are not translated in a code decoration. Smart quote transformations are not applied.</p>

<h4>Source</h4>
<pre>
There is a backtick and two backslashes in `th\\is `` code` decoration.

There is a backslash and a curly brace in `this \{ code` decoration.

`pubwork="book"` is an attribute on the element `citetitle`.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>There is a backtick and two backslashes in <code>th\\is ` code</code> decoration.</p>
<p>There is a backslash and a curly brace in <code>this \{ code</code> decoration.</p>
<p><code>pubwork="book"</code> is an attribute on the element <code>citetitle</code>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;There is a backtick and two backslashes in &lt;code&gt;th\\is ` code&lt;/code&gt; decoration.&lt;/p&gt; &lt;p&gt;There is a backslash and a curly brace in &lt;code&gt;this \{ code&lt;/code&gt; decoration.&lt;/p&gt; &lt;p&gt;&lt;code&gt;pubwork="book"&lt;/code&gt; is an attribute on the element &lt;code&gt;citetitle&lt;/code&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;There is a backtick and two backslashes in &lt;code&gt;th\\is ` code&lt;/code&gt; decoration.&lt;/p&gt; &lt;p&gt;There is a backslash and a curly brace in &lt;code&gt;this \{ code&lt;/code&gt; decoration.&lt;/p&gt; &lt;p&gt;&lt;code&gt;pubwork="book"&lt;/code&gt; is an attribute on the element &lt;code&gt;citetitle&lt;/code&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516685388">Case: Escapes in decorations</h3>

<p>Escape sequences are recognized inside decorations.</p>

<h4>Source</h4>
<pre>
There is a `*` in *this \* bold* decoration.

There is a `_` in _this \_ italic_ decoration.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>There is a <code>*</code> in <span style="color: green"><b>this * bold</b></span> decoration.</p>
<p>There is a <code>_</code> in <span style="color: green"><i>this _ italic</i></span> decoration.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;There is a &lt;code&gt;*&lt;/code&gt; in &lt;phrase&gt;&lt;annotation type="bold"&gt;this * bold&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt; &lt;p&gt;There is a &lt;code&gt;_&lt;/code&gt; in &lt;phrase&gt;&lt;annotation type="italic"&gt;this _ italic&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;There is a &lt;code&gt;*&lt;/code&gt; in &lt;phrase&gt;&lt;annotation type="bold"&gt;this * bold&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt; &lt;p&gt;There is a &lt;code&gt;_&lt;/code&gt; in &lt;phrase&gt;&lt;annotation type="italic"&gt;this _ italic&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516673996">Case: XML reserved characters in citation specifically attribute</h3>

<p>XML reserved characters occurring within the text of a “specifically” attribute.</p>

<h4>Source</h4>
<pre>
{Skimbleshanks}(animal '"Old  &lt;&gt;&amp; Possum"' (Eliott)).
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><span style="color: green"><span style="color: red">Skimbleshanks</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="animal" specifically="&amp;quot;Old &amp;lt;&amp;gt;&amp;amp; Possum&amp;quot;" namespace="Eliott"&gt;Skimbleshanks&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="animal" specifically="&amp;quot;Old &amp;lt;&amp;gt;&amp;amp; Possum&amp;quot;" namespace="Eliott"&gt;Skimbleshanks&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516670284">Test: Conditions</h2>

<p>You can add conditions to block metadata using condition tokens. Condition tokens start with <code>?</code> and must not contain spaces. The application of conditions to text is up to the application layer. SAM just provided a mechanism for recording conditions.</p>


<h3 id="idm516669644">Case: Conditions on unordered list shortcut</h3>

<p>A condition on an unordered list item.</p>

<h4>Source</h4>
<pre>
* Fred

*(?foo) Barney and
        Betty and
        Bam Bam.

* Wilma
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>Fred</p>
</li>
<li conditions="foo">
<p>Barney and Betty and Bam Bam.</p>
</li>
<li>
<p>Wilma</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="foo"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="foo"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516656844">Case: Conditions on ordered list shortcut</h3>

<p>Condition on an ordered list item.</p>

<h4>Source</h4>
<pre>
1. Fred
2.(?foo) Barney and
         Betty and
         Bam Bam.
3. Wilma
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>Fred</p>
</li>
<li conditions="foo">
<p>Barney and Betty and Bam Bam.</p>
</li>
<li>
<p>Wilma</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="foo"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="foo"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516648780">Test: Block inserts</h2>

<p>An insert creates an instruction to insert something into the document.</p>


<h3 id="idm516649676">Case: Image insert</h3>

<p>Insert an image.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;(image foo.gif)(?goo)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert conditions="goo" item="foo.gif" type="image"></insert>

<h4>Intended output (space normalized)</h4>
<pre>&lt;insert conditions="goo" item="foo.gif" type="image"/&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert conditions="goo" item="foo.gif" type="image"/&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516647500">Case: Key insert</h3>

<p>Insert the value of a key. Syntax for creating keys is left to the language designer. Key resolution belongs to the application layer.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;[%glug]
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert keyref="glug"></insert>

<h4>Intended output (space normalized)</h4>
<pre>&lt;insert keyref="glug"/&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert keyref="glug"/&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516644172">Test: Inline inserts</h2>

<p>Inline inserts are an instructions to insert something into the middle of a paragraph.</p>


<h3 id="idm516645580">Case: Inline inserts</h3>

<p>Inline inserts.</p>

<h4>Source</h4>
<pre>
Because you often want to &gt;(image "foo.gif")(#bar)(?baz)(?bat) change some part of a text when it is being
reused, &lt;fragments&gt; &amp; fragment references can both define local {strings}(feature).
Any {string references}(feature) inside a fragment will be resolved by looking first
at local-strings defined in the &gt;[*my-table] fragment reference, then at local strings defined
in the fragment definition, and then at global strings. In effect, this means
that you can define string substitutions whenever you insert a fragment into your content.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Because you often want to <inline-insert conditions="baz,bat" item="foo.gif" name="bar" type="image"></inline-insert> change some part of a text when it is being reused, &lt;fragments&gt; &amp; fragment references can both define local <span style="color: green"><span style="color: red">strings</span></span>. Any <span style="color: green"><span style="color: red">string references</span></span> inside a fragment will be resolved by looking first at local-strings defined in the <inline-insert idref="my-table"></inline-insert> fragment reference, then at local strings defined in the fragment definition, and then at global strings. In effect, this means that you can define string substitutions whenever you insert a fragment into your content.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Because you often want to &lt;inline-insert conditions="baz,bat" item="foo.gif" name="bar" type="image"/&gt; change some part of a text when it is being reused, &amp;lt;fragments&amp;gt; &amp;amp; fragment references can both define local &lt;phrase&gt;&lt;annotation type="feature"&gt;strings&lt;/annotation&gt;&lt;/phrase&gt;. Any &lt;phrase&gt;&lt;annotation type="feature"&gt;string references&lt;/annotation&gt;&lt;/phrase&gt; inside a fragment will be resolved by looking first at local-strings defined in the &lt;inline-insert idref="my-table"/&gt; fragment reference, then at local strings defined in the fragment definition, and then at global strings. In effect, this means that you can define string substitutions whenever you insert a fragment into your content.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Because you often want to &lt;inline-insert conditions="baz,bat" item="foo.gif" name="bar" type="image"/&gt; change some part of a text when it is being reused, &amp;lt;fragments&amp;gt; &amp;amp; fragment references can both define local &lt;phrase&gt;&lt;annotation type="feature"&gt;strings&lt;/annotation&gt;&lt;/phrase&gt;. Any &lt;phrase&gt;&lt;annotation type="feature"&gt;string references&lt;/annotation&gt;&lt;/phrase&gt; inside a fragment will be resolved by looking first at local-strings defined in the &lt;inline-insert idref="my-table"/&gt; fragment reference, then at local strings defined in the fragment definition, and then at global strings. In effect, this means that you can define string substitutions whenever you insert a fragment into your content.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516639052">Case: Paragraph that is just an inline insert</h3>

<p>An inline insert on a line by itself creates a paragraph containing an insert, rather than a standalone insert instruction.</p>

<h4>Source</h4>
<pre>
&gt;[#foo8]
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><inline-insert nameref="foo8"></inline-insert></p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;inline-insert nameref="foo8"/&gt;&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;inline-insert nameref="foo8"/&gt;&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516635980">Test: Strings</h2>

<p>A string is a variable that can contain text, including annotations and citations.</p>


<h3 id="idm516627660">Case: String definition</h3>

<p>A string definition.</p>

<h4>Source</h4>
<pre>
$foo = bar bar black sheep
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<string name="foo">bar bar black sheep</string>

<h4>Intended output (space normalized)</h4>
<pre>&lt;string name="foo"&gt;bar bar black sheep&lt;/string&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;string name="foo"&gt;bar bar black sheep&lt;/string&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516630860">Case: String references</h3>

<p>Inserting the value of a string.</p>

<h4>Source</h4>
<pre>
This sentence includes a string reference &gt;[$name].
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This sentence includes a string reference <inline-insert stringref="name"></inline-insert>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This sentence includes a string reference &lt;inline-insert stringref="name"/&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This sentence includes a string reference &lt;inline-insert stringref="name"/&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516618828">Test: Fragments</h2>

<p>Fragments are sequences of paragraphs that can have management metadata applied to them and that can be inserted in other places.</p>


<h3 id="idm516618700">Case: Fragment</h3>

<p>A fragment definition.</p>

<h4>Source</h4>
<pre>
~~~(#foo3)(?gruz-natz)
    $a=apple
    $b=banana

    This is a sentence inside a fragment.

    ~~~(#gruznatz)
        $p=peach

        This is a nested fragment.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<fragment conditions="gruz-natz" name="foo3">
<string name="a">apple</string>
<string name="b">banana</string>
<p>This is a sentence inside a fragment.</p>
<fragment name="gruznatz">
<string name="p">peach</string>
<p>This is a nested fragment.</p>
</fragment>
</fragment>

<h4>Intended output (space normalized)</h4>
<pre>&lt;fragment conditions="gruz-natz" name="foo3"&gt; &lt;string name="a"&gt;apple&lt;/string&gt; &lt;string name="b"&gt;banana&lt;/string&gt; &lt;p&gt;This is a sentence inside a fragment.&lt;/p&gt; &lt;fragment name="gruznatz"&gt; &lt;string name="p"&gt;peach&lt;/string&gt; &lt;p&gt;This is a nested fragment.&lt;/p&gt; &lt;/fragment&gt; &lt;/fragment&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;fragment conditions="gruz-natz" name="foo3"&gt; &lt;string name="a"&gt;apple&lt;/string&gt; &lt;string name="b"&gt;banana&lt;/string&gt; &lt;p&gt;This is a sentence inside a fragment.&lt;/p&gt; &lt;fragment name="gruznatz"&gt; &lt;string name="p"&gt;peach&lt;/string&gt; &lt;p&gt;This is a nested fragment.&lt;/p&gt; &lt;/fragment&gt; &lt;/fragment&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516608588">Case: Insert a fragment</h3>

<p>An instruction to insert a fragment. Note that actually resolving an inserting the fragment is a job for the application layer.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;[~foobar]
    $a=apricot
    $b=breadfruit
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert fragmentref="foobar">
<string name="a">apricot</string>
<string name="b">breadfruit</string>
</insert>
<h4>Intended output (space normalized)</h4>
<pre>&lt;insert fragmentref="foobar"&gt; &lt;string name="a"&gt;apricot&lt;/string&gt; &lt;string name="b"&gt;breadfruit&lt;/string&gt; &lt;/insert&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert fragmentref="foobar"&gt; &lt;string name="a"&gt;apricot&lt;/string&gt; &lt;string name="b"&gt;breadfruit&lt;/string&gt; &lt;/insert&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idm516614604">Test: Smart quotes</h2>

<p>Smart quotes is an optional feature of the parser, not a feature of the SAM language. It turns straight quotes into curly quotes. It raises a warning when it can’t figure out how to handle a case. The algorithm could be improved in the future to handle more cases correctly.</p>
<p>The canonical way to handle quotes in SAM is to use real curly quotes to begin with. All SAM documents are UTF-8.</p>
<Note>These tests will fail if smart quotes is not selected</Note>
<p>using the <code>-q</code> option of the parser command line or by setting the <code>smart_quotes</code> attribute of the SamParser object to <code>True</code>.</p>


<h3 id="idm516601932">Case: Smart quotes</h3>

<p>Paragraphs illustrating most of the cases where smart quotes should be recognized in ordinary English.</p>

<h4>Source</h4>
<pre>
"For once, 'sir' adding, 'you're making a
scene.'" and "For once, 'sir' adding,
'you're making a scene.'" In the winter
of ’65. "Yes," he said, "I met her. She's
very 'friendly.'" '"I don’t know what you
mean by 'glory,'" Alice said.' "'I don’t
know what you mean by "glory,"' Alice said."

For "the Duke", perhaps?
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>“For once, ‘sir’ adding, ‘you’re making a scene.’” and “For once, ‘sir’ adding, ‘you’re making a scene.’” In the winter of ’65. “Yes,” he said, “I met her. She’s very ‘friendly.’” ‘“I don’t know what you mean by ‘glory,’” Alice said.’ “‘I don’t know what you mean by “glory,”’ Alice said.”</p>
<p>For “the Duke”, perhaps?</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;“For once, ‘sir’ adding, ‘you’re making a scene.’” and “For once, ‘sir’ adding, ‘you’re making a scene.’” In the winter of ’65. “Yes,” he said, “I met her. She’s very ‘friendly.’” ‘“I don’t know what you mean by ‘glory,’” Alice said.’ “‘I don’t know what you mean by “glory,”’ Alice said.”&lt;/p&gt; &lt;p&gt;For “the Duke”, perhaps?&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;“For once, ‘sir’ adding, ‘you’re making a scene.’” and “For once, ‘sir’ adding, ‘you’re making a scene.’” In the winter of ’65. “Yes,” he said, “I met her. She’s very ‘friendly.’” ‘“I don’t know what you mean by ‘glory,’” Alice said.’ “‘I don’t know what you mean by “glory,”’ Alice said.”&lt;/p&gt; &lt;p&gt;For “the Duke”, perhaps?&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516605260">Case: Following an annotation</h3>

<p>Smart quotes also need to be recognized when they follow SAM markup.</p>

<h4>Source</h4>
<pre>
interpretations of the `xref`'s instruction
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>interpretations of the <code>xref</code>’s instruction</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;interpretations of the &lt;code&gt;xref&lt;/code&gt;’s instruction&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;interpretations of the &lt;code&gt;xref&lt;/code&gt;’s instruction&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516499452">Case: Smart quotes with annotations</h3>

<p>Smart quotes surrounding annotated phrases.</p>

<h4>Source</h4>
<pre>
"For once, '{sir}(salutation)' adding, 'you're making a
scene.'" and "For once, {'sir'}(salutation) adding,
'you're making a scene.'" In the winter
of ’65. "Yes," he said, "I met her. She's
very 'friendly.'" '"I don’t know what you
mean by 'glory,'" Alice said.' "'I don’t
know what you mean by "glory,"' Alice said."
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>“For once, ‘<span style="color: green"><span style="color: red">sir</span></span>’ adding, ‘you’re making a scene.’” and “For once, <span style="color: green"><span style="color: red">‘sir’</span></span> adding, ‘you’re making a scene.’” In the winter of ’65. “Yes,” he said, “I met her. She’s very ‘friendly.’” ‘“I don’t know what you mean by ‘glory,’” Alice said.’ “‘I don’t know what you mean by “glory,”’ Alice said.”</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;“For once, ‘&lt;phrase&gt;&lt;annotation type="salutation"&gt;sir&lt;/annotation&gt;&lt;/phrase&gt;’ adding, ‘you’re making a scene.’” and “For once, &lt;phrase&gt;&lt;annotation type="salutation"&gt;‘sir’&lt;/annotation&gt;&lt;/phrase&gt; adding, ‘you’re making a scene.’” In the winter of ’65. “Yes,” he said, “I met her. She’s very ‘friendly.’” ‘“I don’t know what you mean by ‘glory,’” Alice said.’ “‘I don’t know what you mean by “glory,”’ Alice said.”&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;“For once, ‘&lt;phrase&gt;&lt;annotation type="salutation"&gt;sir&lt;/annotation&gt;&lt;/phrase&gt;’ adding, ‘you’re making a scene.’” and “For once, &lt;phrase&gt;&lt;annotation type="salutation"&gt;‘sir’&lt;/annotation&gt;&lt;/phrase&gt; adding, ‘you’re making a scene.’” In the winter of ’65. “Yes,” he said, “I met her. She’s very ‘friendly.’” ‘“I don’t know what you mean by ‘glory,’” Alice said.’ “‘I don’t know what you mean by “glory,”’ Alice said.”&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516492540">Case: Adjacent to parentheses</h3>

<p>Quotes inside parentheses.</p>

<h4>Source</h4>
<pre>
A vector graphic program creates graphics as a collection of  objects ("vector" meaning the mathematical representation of a shape or line).

The shape of the characters (technically, "glyphs") that make up the font are stored separately in font files.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>A vector graphic program creates graphics as a collection of  objects (“vector” meaning the mathematical representation of a shape or line).</p>
<p>The shape of the characters (technically, “glyphs”) that make up the font are stored separately in font files.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;A vector graphic program creates graphics as a collection of objects (“vector” meaning the mathematical representation of a shape or line).&lt;/p&gt; &lt;p&gt;The shape of the characters (technically, “glyphs”) that make up the font are stored separately in font files.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;A vector graphic program creates graphics as a collection of objects (“vector” meaning the mathematical representation of a shape or line).&lt;/p&gt; &lt;p&gt;The shape of the characters (technically, “glyphs”) that make up the font are stored separately in font files.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516488700">Case: Close quote followed by citation.</h3>

<p>Close quote followed by citation.</p>

<h4>Source</h4>
<pre>
"What is truth?"[John 18:38]
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>“What is truth?”<span style="color: brown">[John 18:38]</span></p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;“What is truth?”&lt;citation value="John 18:38"/&gt;&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;“What is truth?”&lt;citation value="John 18:38"/&gt;&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516483836">Case: Miscellaneous cases</h3>

<p>A bunch of miscellaneous cases.</p>

<h4>Source</h4>
<pre>
"title"?

{DocBook}(language)'s

{DITA}(language) and {DocBook}'s
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>“title”?</p>
<p><span style="color: green"><span style="color: red">DocBook</span></span>’s</p>
<p><span style="color: green"><span style="color: red">DITA</span></span> and <span style="color: green"><span style="color: red">DocBook</span></span>’s</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;“title”?&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="language"&gt;DocBook&lt;/annotation&gt;&lt;/phrase&gt;’s&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="language"&gt;DITA&lt;/annotation&gt;&lt;/phrase&gt; and &lt;phrase&gt;&lt;annotation type="language"&gt;DocBook&lt;/annotation&gt;&lt;/phrase&gt;’s&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;“title”?&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="language"&gt;DocBook&lt;/annotation&gt;&lt;/phrase&gt;’s&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="language"&gt;DITA&lt;/annotation&gt;&lt;/phrase&gt; and &lt;phrase&gt;&lt;annotation type="language"&gt;DocBook&lt;/annotation&gt;&lt;/phrase&gt;’s&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516484348">Case: Escaped dumb quotes</h3>

<p>If you want to enter straight quotes and have them stay straight when smart quotes are applied, you have to escape them with <code>\</code> or use the <code>&amp;quot;</code> character entity.</p>

<h4>Source</h4>
<pre>
This para uses \"dumb\" quotes. Don\'t get them &amp;quot;mixed up&amp;quot;.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This para uses "dumb" quotes. Don't get them "mixed up".</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This para uses "dumb" quotes. Don't get them "mixed up".&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This para uses "dumb" quotes. Don't get them "mixed up".&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idm516478076">Case: Em and en dashes</h3>

<p>The smart quote feature will also transform double hyphens surrounded by spaces and triple hyphens surrounded by letters into en and em dashes respectively.</p>

<h4>Source</h4>
<pre>
This para contains -- an en dash and an---em dash.

This para contains -- {an}(word) en dash and an---{em}(word) dash.

This para {contains}(word) -- an en dash and {an}(word)---em dash.

This para *contains* -- an en dash and _an_---em dash.

This para `contains` -- an en dash and "an"---em dash.

This para 'contains' -- an en dash and `an`---em dash.

x, y, z, etc. -- something else
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This para contains – an en dash and an—em dash.</p>
<p>This para contains – <span style="color: green"><span style="color: red">an</span></span> en dash and an—<span style="color: green"><span style="color: red">em</span></span> dash.</p>
<p>This para <span style="color: green"><span style="color: red">contains</span></span> – an en dash and <span style="color: green"><span style="color: red">an</span></span>—em dash.</p>
<p>This para <span style="color: green"><b>contains</b></span> – an en dash and <span style="color: green"><i>an</i></span>—em dash.</p>
<p>This para <code>contains</code> – an en dash and “an”—em dash.</p>
<p>This para ‘contains’ – an en dash and <code>an</code>—em dash.</p>
<p>x, y, z, etc. – something else</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This para contains – an en dash and an—em dash.&lt;/p&gt; &lt;p&gt;This para contains – &lt;phrase&gt;&lt;annotation type="word"&gt;an&lt;/annotation&gt;&lt;/phrase&gt; en dash and an—&lt;phrase&gt;&lt;annotation type="word"&gt;em&lt;/annotation&gt;&lt;/phrase&gt; dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="word"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt; – an en dash and &lt;phrase&gt;&lt;annotation type="word"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;—em dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="bold"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt; – an en dash and &lt;phrase&gt;&lt;annotation type="italic"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;—em dash.&lt;/p&gt; &lt;p&gt;This para &lt;code&gt;contains&lt;/code&gt; – an en dash and “an”—em dash.&lt;/p&gt; &lt;p&gt;This para ‘contains’ – an en dash and &lt;code&gt;an&lt;/code&gt;—em dash.&lt;/p&gt; &lt;p&gt;x, y, z, etc. – something else&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This para contains – an en dash and an—em dash.&lt;/p&gt; &lt;p&gt;This para contains – &lt;phrase&gt;&lt;annotation type="word"&gt;an&lt;/annotation&gt;&lt;/phrase&gt; en dash and an—&lt;phrase&gt;&lt;annotation type="word"&gt;em&lt;/annotation&gt;&lt;/phrase&gt; dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="word"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt; – an en dash and &lt;phrase&gt;&lt;annotation type="word"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;—em dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="bold"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt; – an en dash and &lt;phrase&gt;&lt;annotation type="italic"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;—em dash.&lt;/p&gt; &lt;p&gt;This para &lt;code&gt;contains&lt;/code&gt; – an en dash and “an”—em dash.&lt;/p&gt; &lt;p&gt;This para ‘contains’ – an en dash and &lt;code&gt;an&lt;/code&gt;—em dash.&lt;/p&gt; &lt;p&gt;x, y, z, etc. – something else&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
</body>
</html><!--  Can we have comments after the end of the document? --><!--  Yes we can! -->
